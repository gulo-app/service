(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){e.exports=a(222)},11:function(e,t,a){var n,r=a(131);n="http://montv10.net:9400",window.location.hostname.includes("montv10.net")&&(n="http://montv10.net:9400"),n||(n="http://localhost:9400"),console.log("service-url: ".concat(n));e.exports={API_CALL:function(e,t,a){return new Promise(function(i,c){var s="".concat(n).concat(t);console.log("API_CALL: ".concat(s)),r("".concat(n).concat(t),{method:e,withCredentials:!0,data:a}).then(function(e){i(e.data)}).catch(function(e){console.log("API_CALL ERROR"),console.log(e),c(e)})})},URI:n,GCID:"180978526897-pa56t6sljm8hb1td5be3o2jdhopqbdj4.apps.googleusercontent.com"}},113:function(e,t,a){},148:function(e,t,a){},150:function(e,t,a){},178:function(e,t){},181:function(e,t,a){},182:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},201:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},222:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(58),c=a.n(i);a(113),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(13),o=a(17),l=a(99),u=a.n(l),d=a(10),m=a.n(d),p=a(14),h=a(11),f="FIREBASE_LOGIN",v="AUTO_LOGIN",b="VERIFY_AUTH",E="SET_USER",O="LOGOUT";function g(e){var t=Object(h.API_CALL)("POST","/user/login/firebase",e);return{type:f,payload:t}}function y(){var e=Object(h.API_CALL)("POST","/user/login/auth-test");return{type:b,payload:e}}function j(e){return{type:E,payload:e}}function N(){return(N=Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(h.API_CALL)("POST","/user/logout"),e.abrupt("return",{type:O,payload:t});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var k=a(47),_=a(24),C=a(18),S="FETCH_LISTS",I="INSERT_LIST",w="UPDATE_LIST",L="DELETE_LIST",A="UPDATE_LIST_MODIFIED_AT";function P(){var e=Object(h.API_CALL)("GET","/list");return{type:S,payload:e}}function M(e){return{type:I,payload:e}}var x="UPDATE_LIST_PRODUCT",T="DELETE_LIST_PRODUCT";var D="UPDATE_LIST_MANUAL_PRODUCT",R="DELETE_LIST_MANUAL_PRODUCT";var U=a(4),B=a.n(U);function q(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var F="FETCH_NOTIFICATIONS",G="MARK_UNNEW",z="MARK_READ",H="CONFIRM_NOTIFICATION",V="INSERT_NOTIFICATION",Q="DELETE_NOTIFICATION",W="UPDATE_NOTIFICATION",Y="UPDATE_FIREBASE_NOTIFICATION_TOKEN";function K(){var e=Object(h.API_CALL)("GET","/notification");return{type:F,payload:e}}function J(){var e=Object(h.API_CALL)("POST","/notification/unNew");return{type:G,payload:e}}function Z(e){var t=Object(h.API_CALL)("POST","/notification/".concat(e,"/markRead"));return{type:z,payload:t}}function $(e){var t=Object(h.API_CALL)("POST","/notification/".concat(e,"/confirm"));return{type:H,payload:t}}function X(e){var t=Object(h.API_CALL)("DELETE","/notification/".concat(e));return{type:Q,payload:t}}function ee(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var te="TOGGLE_MENU";function ae(){return{type:te,payload:{}}}var ne="SUBSCRIBE_SOCKET";var re="SET_FIREBASE";function ie(e){return{type:re,payload:e}}var ce=Object(o.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:case E:case v:case f:return t.error?(console.log("login failed"),null):t.payload;case O:return null;default:return e}},lists:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case S:if(n.error)return console.log("fetch lists failed"),a;var r=B.a.keyBy(n.payload,"list_id");return B.a.forOwn(r,function(e,t){e.products=B.a.keyBy(e.products,"id"),e.manual_products=B.a.keyBy(e.manual_products,"id")}),console.log(r),r;case I:var i=n.payload;return Object(C.a)({},a,Object(_.a)({},i.list_id,i));case w:var c=n.payload;return Object(C.a)({},a,Object(_.a)({},c.list_id,c));case L:var s=n.payload;return a[s],Object(k.a)(a,[s].map(q));case x:return t=n.payload,Object(C.a)({},a,Object(_.a)({},t.list_id,Object(C.a)({},a[t.list_id],{products:Object(C.a)({},a[t.list_id].products,Object(_.a)({},t.id,t))})));case D:return t=n.payload,Object(C.a)({},a,Object(_.a)({},t.list_id,Object(C.a)({},a[t.list_id],{manual_products:Object(C.a)({},a[t.list_id].manual_products,Object(_.a)({},t.id,t))})));case T:return delete(e=B.a.cloneDeep(a))[n.payload.list_id].products[n.payload.product_id],e;case R:return delete(e=B.a.cloneDeep(a))[n.payload.list_id].manual_products[n.payload.product_id],e;case A:return Object(C.a)({},a,Object(_.a)({},n.payload.list_id,Object(C.a)({},a[n.payload.list_id],{modified_at:n.payload.modified_at})));default:return a}},notifications:function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case F:return n.error?(console.log("fetch lists failed"),a):B.a.keyBy(n.payload,"notification_id");case V:var r=n.payload;return Object(C.a)({},a,Object(_.a)({},r.notification_id,r));case Q:return a[t=n.payload.notification_id],Object(k.a)(a,[t].map(ee));case W:return e=n.payload,Object(C.a)({},a,Object(_.a)({},e.notification_id,e));case G:return B.a.keyBy(n.payload,"notification_id");case z:return t=n.payload.notification_id,Object(C.a)({},a,Object(_.a)({},t,Object(C.a)({},a[t],{isRead:1})));case H:return console.log("CONFIRM_NOTIFICATION"),e=n.payload,Object(C.a)({},a,Object(_.a)({},e.notification_id,e));default:return a}},isMenu:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case te:return!e;case O:return!1;default:return e}},socket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return t.payload;case O:return e&&e.disconnect(),null;default:return e}},firebase:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return t.payload;default:return e}}}),se=a(5),oe=a(6),le=a(8),ue=a(7),de=a(9),me=a(225),pe=a(227),he=a(224),fe=a(1),ve=(a(148),a(228)),be=a(23),Ee=a(100),Oe=be.a.Device,ge={setItem:function(){var e=Object(p.a)(m.a.mark(function e(t,a){var n,r,i;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getInfo();case 2:n=e.sent,r=n.platform,i="web"===r?window.localStorage:be.a.Storage,e.t0=r,e.next="web"===e.t0?8:"android"===e.t0?11:"ios"===e.t0?11:14;break;case 8:return e.next=10,i.setItem(t,a);case 10:return e.abrupt("break",14);case 11:return e.next=13,i.set({key:t,value:a});case 13:return e.abrupt("break",14);case 14:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),getItem:function(){var e=Object(p.a)(m.a.mark(function e(t){var a,n,r,i;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getInfo();case 2:a=e.sent,n=a.platform,r="web"===n?window.localStorage:be.a.Storage,e.t0=n,e.next="web"===e.t0?8:"android"===e.t0?11:"ios"===e.t0?11:15;break;case 8:return e.next=10,r.getItem(t);case 10:return e.abrupt("return",e.sent);case 11:return e.next=13,r.get({key:t});case 13:return i=e.sent,e.abrupt("return",i.value);case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),removeItem:function(){var e=Object(p.a)(m.a.mark(function e(t){var a,n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe.getInfo();case 2:a=e.sent,n=a.platform,r="web"===n?window.localStorage:be.a.Storage,e.t0=n,e.next="web"===e.t0?8:"android"===e.t0?11:"ios"===e.t0?11:14;break;case 8:return e.next=10,r.removeItem(t);case 10:return e.abrupt("return");case 11:return e.next=13,r.remove({key:t});case 13:return e.abrupt("return");case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),clear:function(){var e=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.removeItem("mail");case 2:return e.next=4,ge.removeItem("authToken");case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},ye=ge,je=be.a.Device,Ne={login:{rememberUser:function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.setItem("authToken",t.authToken);case 2:return e.next=4,ye.setItem("mail",t.mail);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),google:function(){var e=Object(p.a)(m.a.mark(function e(t){var a,n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.getInfo();case 2:a=e.sent,n=a.platform,e.t0=n,e.next="web"===e.t0?7:"android"===e.t0?7:"ios"===e.t0?9:11;break;case 7:return r=new t.auth.GoogleAuthProvider,e.abrupt("return",t.auth().signInWithPopup(r).then(function(e){return t.auth().currentUser.getIdToken(!0).then(function(e){return e})}).catch(function(e){return console.log(e.message)}));case 9:return console.log("login mobile"),e.abrupt("return",Ee.a.login({webClientId:h.GCID}).then(function(e){return e.idToken}).catch(function(e){return console.log(e)}));case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},verifyAuth:function(){var e=Object(p.a)(m.a.mark(function e(t){var a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.getItem("mail");case 2:return a=e.sent,e.next=5,ye.getItem("authToken");case 5:if((n=e.sent)&&a){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",Object(h.API_CALL)("POST","/user/login/byAuthToken",{authToken:n,mail:a}).then(function(e){return e}).catch(function(e){return null}));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),logout:function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.auth().currentUser){e.next=3;break}return e.next=3,t.auth().signOut();case 3:return e.next=5,ye.clear();case 5:console.log("logout");case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},ke=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).googleLogin=a.googleLogin.bind(Object(fe.a)(Object(fe.a)(a))),a.facebookLogin=a.facebookLogin.bind(Object(fe.a)(Object(fe.a)(a))),a.login=a.login.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidUpdate",value:function(e){!e.user&&this.props.user&&this.login()}},{key:"googleLogin",value:function(){var e=Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.login.google(this.props.firebase);case 2:t=e.sent,this.props.firebaseLogin({idToken:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"facebookLogin",value:function(){var e=Object(p.a)(m.a.mark(function e(){var t,a,n=this;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.firebase,a=new t.auth.FacebookAuthProvider,t.auth().signInWithPopup(a).then(function(e){t.auth().currentUser.getIdToken(!0).then(function(e){n.props.firebaseLogin({idToken:e})})}).catch(function(e){console.log(e.message),"auth/account-exists-with-different-credential"===e.code&&alert("\u05de\u05d9\u05d9\u05dc \u05d6\u05d4 \u05db\u05d1\u05e8 \u05de\u05e9\u05d5\u05d9\u05d9\u05da \u05dc\u05d4\u05ea\u05d7\u05d1\u05e8\u05d5\u05ea \u05de\u05d2\u05d5\u05d2\u05dc. \n\u05d9\u05e9 \u05dc\u05d4\u05ea\u05d7\u05d1\u05e8 \u05d1\u05d0\u05de\u05e6\u05e2\u05d5\u05ea \u05d2\u05d5\u05d2\u05dc")});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.login.rememberUser(this.props.user);case 2:this.props.history.push("/lists");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"Login"},r.a.createElement("div",{className:"top"},r.a.createElement("div",{className:"logo"},r.a.createElement("div",{className:"cover"})),r.a.createElement("div",{className:"wave"})),r.a.createElement("main",null,r.a.createElement("div",{className:"welcome"},r.a.createElement("div",{className:"primary"},"Welcome"),r.a.createElement("div",{className:"secondary"},"Sign in to discover the best of Gulo")),r.a.createElement("div",{className:"login-options"},r.a.createElement("div",{className:"google circle",onClick:this.googleLogin}),r.a.createElement("div",{className:"facebook circle",onClick:this.facebookLogin}))))}}]),t}(n.Component);var _e=Object(ve.a)(Object(s.b)(function(e){return{user:e.user,firebase:e.firebase}},function(e){return Object(o.b)({firebaseLogin:g,verifyAuth:y},e)})(ke)),Ce=(a(150),a(39)),Se=a(15),Ie=a(52),we=a(103);Ce.b.add(Se.d,Se.q,Se.l,Se.j,Se.o,Se.n,Se.x,Se.i,Se.m,Se.a,Ie.c,Se.b,Se.w,Se.g,Se.h,Ie.b,Se.p,Se.c,Ie.a,Se.t,Se.r,we.a,Se.e,Se.k,Se.y,Se.s,Se.v,Se.u,Se.f);Ce.b;var Le=a(104),Ae=a.n(Le),Pe=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).pushNotifications=be.a.PushNotifications,a.device=be.a.Device,a.listen=a.listen.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.listen()}},{key:"componentDidUpdate",value:function(e){!e.user&&this.props.user&&this.listen()}},{key:"listen",value:function(){var e=Object(p.a)(m.a.mark(function e(){var t,a,n,r=this;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.user){e.next=2;break}return e.abrupt("return",!1);case 2:return t=this.props.subscribeSocket,(a=Ae()(h.URI)).on("connect",function(){t(a,r.props.user),a.on("newList",function(e){return r.props.insertList(e)}),a.on("listUpdated",function(e){return r.props.updateList(e)}),a.on("listDeleted",function(e){return r.props.deleteList(e)}),a.on("updateListProduct",function(e){return r.props.updateListProduct(e)}),a.on("deleteListProduct",function(e){return r.props.deleteListProduct(e.list_id,e.product_id)}),a.on("updateListModifiedAt",function(e){return r.props.updateListModifiedAt(e.list_id,e.modified_at)}),a.on("updateListManualProduct",function(e){return r.props.updateListManualProduct(e)}),a.on("deleteListManualProduct",function(e){return r.props.deleteListManualProduct(e.list_id,e.product_id)}),a.on("newNotification",function(e){return r.props.insertNotification(e)}),a.on("updateNotification",function(e){return r.props.insertNotification(e)}),a.on("deleteNotification",function(e){return r.props.deleteNotification(e)})}),e.next=7,this.device.getInfo();case 7:"android"!==(n=e.sent).platform&&"ios"!==n.platform||(this.pushNotifications.register(),this.pushNotifications.addListener("registration",function(e){r.props.updateFirebaseNotificationToken(e.value)}));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null}}]),t}(n.Component),Me=Object(s.b)(function(e){return{user:e.user,socket:e.socket}},{subscribeSocket:function(e,t){return console.log("socket: ".concat(e.id," connected")),e.emit("subscribe",t),{type:ne,payload:e}},insertList:M,updateListProduct:function(e){return{type:x,payload:e}},deleteListProduct:function(e,t){return{type:T,payload:{list_id:e,product_id:t}}},updateList:function(e){return{type:w,payload:e}},deleteList:function(e){return{type:L,payload:e}},insertNotification:function(e){return{type:V,payload:e}},deleteNotification:X,updateListManualProduct:function(e){return{type:D,payload:e}},deleteListManualProduct:function(e,t){return{type:R,payload:{list_id:e,product_id:t}}},updateFirebaseNotificationToken:function(e){var t=Object(h.API_CALL)("POST","/notification/updateFirebaseNotificationToken",{token:e});return{type:Y,payload:t}},updateListModifiedAt:function(e,t){return{type:A,payload:{list_id:e,modified_at:t}}}})(Pe),xe=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).verifyAuth=a.verifyAuth.bind(Object(fe.a)(Object(fe.a)(a))),a.logout=a.logout.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.verifyAuth()}},{key:"componentDidUpdate",value:function(e){e.user&&!this.props.user&&this.logout()}},{key:"verifyAuth",value:function(){var e=Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.props.user){e.next=2;break}return e.abrupt("return",!0);case 2:return e.next=4,Ne.verifyAuth(this.props.user);case 4:(t=e.sent)||this.props.history.push("login"),this.props.setUser(t);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.logout(this.props.firebase);case 2:this.props.history.push("/login");case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return null}}]),t}(n.Component);var Te=Object(ve.a)(Object(s.b)(function(e){return{user:e.user,firebase:e.firebase}},function(e){return Object(o.b)({setUser:j},e)})(xe)),De=(a(181),a(182),a(183),a(105)),Re=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).state={hover:!1},a.toggleHover=a.toggleHover.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"toggleHover",value:function(){this.setState({hover:!this.state.hover})}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.icon,n=e.title,i=e.size,c=e.style,s=e.hoverStyle,o=e.onClick,l=e.faType,u=this.state.hover?this.props.hoverColor:this.props.color,d=this.state.hover?s:c;return r.a.createElement(De.a,{className:"Icon ".concat(t," ").concat(a),onMouseEnter:this.toggleHover,onMouseLeave:this.toggleHover,icon:[l||"fas",a],color:u,size:i,title:n,onClick:o,style:d})}}]),t}(n.Component),Ue=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ue.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"toggleStatus",value:function(){this.props.toggleMenu()}},{key:"render",value:function(){var e=this,t=this.props.notifications,a=B.a.filter(t,function(e){return 0===e.isRead}).length;return r.a.createElement("div",{className:"MenuToggler"},a>0&&r.a.createElement("div",{className:"badger"},a),r.a.createElement(Re,{icon:"bars",size:"2x",onClick:function(){return e.toggleStatus()}}))}}]),t}(n.Component);var Be=Object(s.b)(function(e){return{notifications:e.notifications}},function(e){return Object(o.b)({toggleMenu:ae},e)})(Ue),qe=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).link=a.link.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"link",value:function(e){this.props.history.push(e),this.props.toggleMenu()}},{key:"render",value:function(){var e=this,t=this.props,a=t.isMenu,n=t.user,i=t.notifications,c=B.a.filter(i,function(e){return 0===e.isRead}).length;return r.a.createElement("div",{className:"SideMenu ".concat(!a&&"hidden")},r.a.createElement("div",{className:"overlay",onClick:function(){return e.props.toggleMenu()}}),r.a.createElement("main",null,r.a.createElement("div",{className:"toggler"},r.a.createElement(Be,null)),r.a.createElement("div",{className:"profile"},r.a.createElement("div",{className:"pic"},r.a.createElement("img",{src:n.pic,alt:""})),r.a.createElement("div",{className:"username"},n.firstname," ",n.lastname),r.a.createElement("div",{className:"hr"})),r.a.createElement("menu",{className:"".concat(!a&&"hidden")},r.a.createElement("div",{className:"row",onClick:function(){return e.link("/lists")}},r.a.createElement("div",{className:"icon",style:{marginRight:"+3px"}},r.a.createElement(Re,{icon:"clipboard-list"})),r.a.createElement("div",{className:"title"},"\u05d4\u05e8\u05e9\u05d9\u05de\u05d5\u05ea \u05e9\u05dc\u05d9")),r.a.createElement("div",{className:"row",onClick:function(){return e.link("/notifications")}},r.a.createElement("div",{className:"icon notifications"},c>0&&r.a.createElement("div",{className:"badger"},c),r.a.createElement(Re,{faType:"far",icon:"bell"})),r.a.createElement("div",{className:"title"},"\u05d4\u05ea\u05e8\u05d0\u05d5\u05ea")),r.a.createElement("div",{className:"row",onClick:function(){return e.props.logout(e.props.firebase)}},r.a.createElement("div",{className:"icon"},r.a.createElement(Re,{icon:"power-off"})),r.a.createElement("div",{className:"title"},"\u05d4\u05ea\u05e0\u05ea\u05e7\u05d5\u05ea"))),r.a.createElement("footer",null,r.a.createElement("div",null,"Gulo"))))}}]),t}(n.Component),Fe=Object(ve.a)(Object(s.b)(function(e){return{user:e.user,isMenu:e.isMenu,notifications:e.notifications,firebase:e.firebase}},{logout:function(){return N.apply(this,arguments)},toggleMenu:ae})(qe)),Ge=(a(184),a(185),function(){return r.a.createElement("div",{className:"EmptyList"},r.a.createElement("div",{className:"icon"},r.a.createElement(Re,{icon:"file",faType:"far"})),r.a.createElement("div",{className:"primary"},"\u05d0\u05d9\u05df \u05dc\u05da \u05e8\u05e9\u05d9\u05de\u05d5\u05ea \u05e2\u05d3\u05d9\u05d9\u05df"),r.a.createElement("div",{className:"secondary"},'\u05dc\u05d7\u05e5 \u05e2\u05dc \u05d4"+" \u05db\u05d3\u05d9 \u05dc\u05d4\u05ea\u05d7\u05d9\u05dc'))}),ze=(a(186),function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ue.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e=this.props.list;return r.a.createElement("div",{className:"List"},r.a.createElement("div",{className:"icon",style:{background:e.list_type_color},onClick:this.props.showList},r.a.createElement(Re,{icon:e.list_type_icon,size:"2x"})),r.a.createElement("div",{className:"title",onClick:this.props.showList},r.a.createElement("div",{className:"name"},e.list_name),r.a.createElement("div",{className:"mail"},e.creator.fullname)),r.a.createElement("div",{className:"options",onClick:this.props.editList},r.a.createElement(Re,{icon:"ellipsis-v",size:"2x"})))}}]),t}(n.Component)),He=(a(187),a(62)),Ve=a.n(He);Ve.a.defaultStyles.overlay.backgroundColor="rgba(0,0,0,0.4)";var Qe=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ue.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){return r.a.createElement(Ve.a,{isOpen:this.props.isOpen,ariaHideApp:!1,className:"Modal ".concat(this.props.className),shouldCloseOnOverlayClick:!0,onRequestClose:this.props.close},this.props.children)}}]),t}(n.Component),We=a(35),Ye=(a(196),a(197),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).state={options:[]},a.fetchAPI=a.fetchAPI.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.fetchAPI()}},{key:"fetchAPI",value:function(){var e=this,t=this.props.api;if(!t)return!1;Object(h.API_CALL)(t.verb,t.url).then(function(t){e.setState({options:t})}).catch(function(t){setTimeout(e.fetchAPI,1e3)})}},{key:"renderRadios",value:function(){var e=this,t=this.props,a=t.name,n=t.value,i=this.state.options;return B.a.map(i,function(t){var i={backgroundColor:t.id===n?t.color:""},c=e.props.readOnly?null:function(){return e.props.onClick({target:{name:a,value:t.id}})};return r.a.createElement("div",{key:t.id,style:i,onClick:c},t.name)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"RadioTypes"},this.renderRadios())}}]),t}(n.Component)),Ke=(a(198),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).state={status:!1,users:[],value:"",isValid:!0,isSelected:!1},a.handleChange=a.handleChange.bind(Object(fe.a)(Object(fe.a)(a))),a.toggleStatus=a.toggleStatus.bind(Object(fe.a)(Object(fe.a)(a))),a.fetchUsers=a.fetchUsers.bind(Object(fe.a)(Object(fe.a)(a))),a.validateInsert=a.validateInsert.bind(Object(fe.a)(Object(fe.a)(a))),a.renderOptions=a.renderOptions.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.fetchUsers()}},{key:"componentDidUpdate",value:function(e,t){e.shares!==this.props.shares&&this.setState({status:!1,value:""})}},{key:"fetchUsers",value:function(){var e=this;Object(h.API_CALL)("GET","/user/getAllUsersButMe").then(function(t){console.log(t),e.setState({users:t})}).catch(function(t){e.setState({redirectToLogin:!0})})}},{key:"toggleStatus",value:function(){var e=!this.state.status;this.setState({status:e})}},{key:"renderDataListOptions",value:function(){var e=this.state.users;return B.a.map(e,function(e){return r.a.createElement("option",{key:e.mail,value:e.mail},e.mail)})}},{key:"renderSharesList",value:function(){var e=this,t=this.props.creator,a=B.a.map(this.props.shares,function(t){return r.a.createElement("div",{className:"share",key:t.mail,onClick:function(){return e.validateRemove(t)}},r.a.createElement("div",{className:"pic"},r.a.createElement("img",{src:t.pic,alt:""})),r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"name"},t.fullname),r.a.createElement("div",{className:"mail"},t.mail)))});if(t){var n=r.a.createElement("div",{className:"share manager",key:t.mail},r.a.createElement("div",{className:"pic"},r.a.createElement("img",{src:t.pic,alt:""})),r.a.createElement("div",{className:"details"},r.a.createElement("div",{className:"name"},"\u05de\u05e0\u05d4\u05dc: ",t.fullname),r.a.createElement("div",{className:"mail"},t.mail)));a.unshift(n)}return r.a.createElement("div",{className:"shares-list"},a)}},{key:"handleChange",value:function(e){var t=e.target.value;this.setState({value:t,isValid:!0,isSelected:!1})}},{key:"validateInsert",value:function(e){e.preventDefault();var t=this.state,a=t.value,n=t.users,r=B.a.filter(n,function(e){return e.mail===a}),i=B.a.find(this.props.shares,{mail:a});if(0===r.length||i)return this.setState({isValid:!1}),!1;this.props.onInsert(r[0])}},{key:"validateRemove",value:function(e){if(!this.props.isCreator)return!1;window.confirm("\u05d4\u05d0\u05dd \u05dc\u05d4\u05e1\u05d9\u05e8 \u05de\u05d4\u05e7\u05d1\u05d5\u05e6\u05d4 \u05d0\u05ea \u05d4\u05de\u05e9\u05ea\u05de\u05e9\n".concat(e.fullname,"?")),this.props.onRemove(e)}},{key:"renderOptions",value:function(){var e=this,t=this.state.value;return!(t.length<2||this.state.isSelected)&&B.a.map(this.state.users,function(a){if(a.fullname.toLowerCase().includes(t.toLowerCase())||a.mail.toLowerCase().includes(t.toLowerCase()))return r.a.createElement("div",{className:"option",key:a.user_id,onClick:function(){return e.optionSelected(a)}},r.a.createElement("div",null,a.fullname),r.a.createElement("div",null,a.mail))})}},{key:"optionSelected",value:function(e){this.setState({value:e.mail,isSelected:!0})}},{key:"render",value:function(){var e=this.state,t=e.status,a=e.value,n=e.isValid,i=this.props.isCreator;return r.a.createElement("div",{className:"ListShares"},i&&r.a.createElement("div",{className:"toggle-row"},r.a.createElement("div",{onClick:this.toggleStatus},r.a.createElement(Re,{icon:t?"minus":"plus"})," \xa0",t?"\u05d1\u05d9\u05d8\u05d5\u05dc \u05d4\u05d5\u05e1\u05e4\u05ea \u05e9\u05d5\u05ea\u05e3":"\u05d4\u05d5\u05e1\u05e3 \u05e9\u05d5\u05ea\u05e3 \u05dc\u05e8\u05e9\u05d9\u05de\u05d4"),t&&r.a.createElement("div",null,r.a.createElement("button",{className:"btn-plus",onClick:this.validateInsert},r.a.createElement(Re,{icon:"plus"})))),t&&r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:a,className:"ltr ".concat(n?"":"invalid"),onChange:this.handleChange,placeholder:"Search by Mail or Name..."}),r.a.createElement("div",{className:"options"},this.renderOptions())),!t&&this.renderSharesList())}}]),t}(n.Component)),Je=function(e){function t(e){var a;Object(se.a)(this,t);var n=(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).props,r=n.list,i=n.user,c=r?r.creator:i,s=c.mail===i.mail;return a.state=r?{creator:c,isCreator:s,list_id:r.list_id,list_name:r.list_name,list_type:r.list_type_id,device_id:r.device.id||"",device_password:r.device.password||"",shares:r.shares,shares_deleted:[],shares_inserted:[]}:{creator:c,isCreator:s,list_name:"",list_type:1,device_id:"",device_password:"",shares:[],shares_deleted:[],shares_inserted:[]},a.handleChange=a.handleChange.bind(Object(fe.a)(Object(fe.a)(a))),a.submit=a.submit.bind(Object(fe.a)(Object(fe.a)(a))),a.insertShare=a.insertShare.bind(Object(fe.a)(Object(fe.a)(a))),a.removeShare=a.removeShare.bind(Object(fe.a)(Object(fe.a)(a))),a.delete=a.delete.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,r={};r[a]=n,this.setState(r)}},{key:"insertShare",value:function(e){var t=[e].concat(Object(We.a)(this.state.shares_inserted)),a=[e].concat(Object(We.a)(this.state.shares)),n=this.state.shares_deleted;B.a.find(n,{user_id:e.user_id})&&(n=B.a.filter(n,function(t){return t.user_id!==e.user_id}),t=B.a.filter(t,function(t){return t.user_id!==e.user_id})),this.setState({shares:a,shares_inserted:t,shares_deleted:n})}},{key:"removeShare",value:function(e){var t=[e].concat(Object(We.a)(this.state.shares_deleted)),a=this.state.shares_inserted,n=B.a.filter(this.state.shares,function(t){return t.user_id!==e.user_id});B.a.find(a,{user_id:e.user_id})&&(t=B.a.filter(t,function(t){return t.user_id!==e.user_id}),a=B.a.filter(a,function(t){return t.user_id!==e.user_id})),this.setState({shares:n,shares_deleted:t,shares_inserted:a})}},{key:"submit",value:function(e){var t=this;e.preventDefault();var a=this.props.list,n={verb:a?"PUT":"POST",url:a?"/list/".concat(a.list_id):"/list"};Object(h.API_CALL)(n.verb,n.url,this.state).then(function(e){t.props.close()}).catch(function(e){var t=e.response&&e.response.data;"device details invalid"===t?alert("\u05e4\u05e8\u05d8\u05d9 \u05d4\u05d4\u05ea\u05e7\u05df \u05d0\u05d9\u05e0\u05dd \u05e0\u05db\u05d5\u05e0\u05d9\u05dd"):"device already connected"===t&&alert("\u05d4\u05d4\u05ea\u05e7\u05df \u05db\u05d1\u05e8 \u05de\u05e9\u05d5\u05d9\u05d9\u05da \u05dc\u05e8\u05e9\u05d9\u05de\u05d4 \u05d0\u05d7\u05e8\u05ea")})}},{key:"delete",value:function(){var e=this,t=this.state,a=t.isCreator,n=t.list_id;if(!window.confirm(a?"\u05d4\u05d0\u05dd \u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05de\u05d7\u05d5\u05e7 \u05e1\u05d5\u05e4\u05d9\u05ea \u05e8\u05e9\u05d9\u05de\u05d4 \u05d6\u05d5?":"\u05d4\u05d0\u05dd \u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05d4\u05e1\u05d9\u05e8 \u05d4\u05e9\u05ea\u05ea\u05e4\u05d5\u05ea\u05da \u05de\u05e8\u05e9\u05d9\u05de\u05d4 \u05d6\u05d5?"))return!1;Object(h.API_CALL)("DELETE","/list/".concat(n),this.state).then(function(t){e.props.close()}).catch(function(e){console.log(e.message)})}},{key:"render",value:function(){var e=this,t=this.state,a=this.props.list,n=this.state,i=n.creator,c=n.isCreator;return r.a.createElement("div",{className:"ModalList"},r.a.createElement("header",{className:"modal-header"},r.a.createElement("div",{className:"title"},a?this.props.list.list_name:"\u05e8\u05e9\u05d9\u05de\u05d4 \u05d7\u05d3\u05e9\u05d4"),a&&r.a.createElement("div",{className:"left"},r.a.createElement(Re,{icon:"trash",color:"#f95d49;",onClick:this.delete})," ")),r.a.createElement("form",{onSubmit:this.submit,onReset:function(){return e.props.close()}},r.a.createElement("header",null,"\u05e4\u05e8\u05d8\u05d9 \u05d4\u05e8\u05e9\u05d9\u05de\u05d4"),r.a.createElement("div",{className:"field"},r.a.createElement("div",null,"\u05e9\u05dd \u05d4\u05e8\u05e9\u05d9\u05de\u05d4"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"list_name",value:t.list_name,onChange:this.handleChange,placeholder:"\u05d4\u05db\u05e0\u05e1 \u05d0\u05ea \u05e9\u05dd \u05d4\u05e8\u05e9\u05d9\u05de\u05d4",required:!0}))),r.a.createElement("div",{className:"field radio"},r.a.createElement(Ye,{name:"list_type",value:t.list_type,onClick:this.handleChange,api:{verb:"GET",url:"/list/types"},readOnly:!c})),r.a.createElement("header",null,"\u05d7\u05d1\u05e8\u05d9 \u05d4\u05e8\u05e9\u05d9\u05de\u05d4"),r.a.createElement("div",{className:"field"},r.a.createElement(Ke,{shares:t.shares,creator:i,isCreator:c,onInsert:this.insertShare,onRemove:this.removeShare})),r.a.createElement("header",null,"\u05e4\u05e8\u05d8\u05d9 \u05d4\u05d4\u05ea\u05e7\u05df"),c&&r.a.createElement("div",null,r.a.createElement("div",{className:"field"},r.a.createElement("div",null,"\u05de\u05e1\u05e4\u05e8 \u05e1\u05d9\u05d3\u05d5\u05e8\u05d9"),r.a.createElement("div",null,r.a.createElement("input",{type:"number",name:"device_id",value:t.device_id,onChange:this.handleChange,placeholder:"\u05d4\u05d6\u05df \u05d0\u05ea \u05de\u05e1\u05e4\u05e8 \u05d4\u05d4\u05ea\u05e7\u05df \u05e9\u05d1\u05e8\u05e9\u05d5\u05ea\u05da",readOnly:!c}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",null,"\u05e1\u05d9\u05e1\u05de\u05d0"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"device_password",value:t.device_password,onChange:this.handleChange,placeholder:"\u05d4\u05d6\u05df \u05d0\u05ea \u05d4\u05e1\u05d9\u05e1\u05de\u05d0 \u05d4\u05e8\u05e9\u05d5\u05de\u05d4 \u05e2\u05dc \u05d2\u05d1 \u05d4\u05d4\u05ea\u05e7\u05df",readOnly:!c})))),r.a.createElement("footer",null,r.a.createElement("div",{className:"cancel"},r.a.createElement("button",{type:"reset"},"\u05d1\u05d9\u05d8\u05d5\u05dc")),r.a.createElement("div",{className:"confirm"},r.a.createElement("button",{type:"submit"},"\u05d0\u05d9\u05e9\u05d5\u05e8")))))}}]),t}(n.Component);var Ze=Object(s.b)(function(e){return{user:e.user}},function(e){return Object(o.b)({insertList:M},e)})(Je),$e=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).state={isModal:!1,editList:null},a.toggleIsModal=a.toggleIsModal.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("beforeunload",function(e){e.preventDefault()})}},{key:"toggleIsModal",value:function(){var e=this,t=!this.state.isModal;this.setState({isModal:t},function(){t||e.setState({editList:null})})}},{key:"renderLists",value:function(){var e=this,t=this.props.lists;return B.a.map(t,function(t){return r.a.createElement(ze,{key:t.list_id,list:t,showList:function(){return e.props.history.push("/list/".concat(t.list_id))},editList:function(){return e.setState({editList:t,isModal:!0})}})})}},{key:"renderEmpty",value:function(){return r.a.createElement(Ge,null)}},{key:"render",value:function(){var e=this.props.lists;return r.a.createElement("div",{className:"Page Lists"},r.a.createElement(Qe,{isOpen:this.state.isModal},r.a.createElement(Ze,{list:this.state.editList,close:this.toggleIsModal})),r.a.createElement("header",null,r.a.createElement("div",{className:"right"},r.a.createElement(Be,null)),r.a.createElement("div",{className:"title"},"\u05d4\u05e8\u05e9\u05d9\u05de\u05d5\u05ea \u05e9\u05dc\u05d9"),r.a.createElement("div",{className:"left"},r.a.createElement(Re,{icon:"search",size:"2x"}))),r.a.createElement("main",{className:"lists"},B.a.size(e)>0&&this.renderLists(),0===B.a.size(e)&&this.renderEmpty()),r.a.createElement("footer",null,r.a.createElement("button",{onClick:this.toggleIsModal},r.a.createElement(Re,{icon:"plus"}),"\u05e8\u05e9\u05d9\u05de\u05d4 \u05d7\u05d3\u05e9\u05d4 ")))}}]),t}(n.Component),Xe=Object(ve.a)(Object(s.b)(function(e){return{lists:e.lists,socket:e.socket}})($e)),et=(a(199),a(106)),tt=(a(200),function(e){function t(e){var a;Object(se.a)(this,t);var n=(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).props.product;return a.state=n?{product_name:n.product_name,quantity:n.quantity,memo:n.memo?n.memo:""}:{product_name:"",quantity:1,memo:""},a.increaseQuantity=a.increaseQuantity.bind(Object(fe.a)(Object(fe.a)(a))),a.decreaseQuantity=a.decreaseQuantity.bind(Object(fe.a)(Object(fe.a)(a))),a.handleMemo=a.handleMemo.bind(Object(fe.a)(Object(fe.a)(a))),a.delete=a.delete.bind(Object(fe.a)(Object(fe.a)(a))),a.update=a.update.bind(Object(fe.a)(Object(fe.a)(a))),a.new=a.new.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.product_name&&this.product_name.focus()}},{key:"increaseQuantity",value:function(){var e=this.state.quantity;this.setState({quantity:e+1})}},{key:"decreaseQuantity",value:function(){var e=this.state.quantity;if(1===e)return!1;this.setState({quantity:e-1})}},{key:"handleMemo",value:function(e){var t=e.target.value;this.setState({memo:t})}},{key:"update",value:function(e){var t=this;e.preventDefault();var a=Object(C.a)({},this.props.product,this.state),n=a.isManual?"manual_product":"product";Object(h.API_CALL)("PUT","/list/".concat(a.list_id,"/").concat(n,"/").concat(a.id),{product:a}).then(function(e){t.props.close()})}},{key:"new",value:function(e){var t=this;e.preventDefault();var a=Object(C.a)({},this.state);Object(h.API_CALL)("POST","/list/".concat(this.props.list.list_id,"/manual_product"),{product:a}).then(function(e){t.props.close()})}},{key:"delete",value:function(){var e=this;if(!window.confirm("\u05d4\u05d0\u05dd \u05dc\u05de\u05d7\u05d5\u05e7 \u05de\u05d5\u05e6\u05e8 \u05d6\u05d4?"))return!1;var t=this.props.product;if(!t.id)return!1;var a=t.isManual?"manual_product":"product";Object(h.API_CALL)("DELETE","/list/".concat(t.list_id,"/").concat(a,"/").concat(t.id),{product_id:t.id}).then(function(t){e.props.close()})}},{key:"render",value:function(){var e=this,t=this.props.product;return r.a.createElement("div",{className:"ModalProduct"},r.a.createElement("header",{className:"modal-header"},r.a.createElement("div",{className:"title"},"\u05e2\u05e8\u05d9\u05db\u05ea \u05de\u05d5\u05e6\u05e8"),r.a.createElement("div",{className:"left"},r.a.createElement(Re,{icon:"trash",color:"#f95d49;",onClick:this.delete}))),r.a.createElement("form",{onSubmit:t?this.update:this.new,onReset:this.props.close},t&&r.a.createElement("div",{className:"product_name"},t.product_name),!t&&r.a.createElement("div",{className:"field"},r.a.createElement("div",null,"\u05e9\u05dd \u05d4\u05de\u05d5\u05e6\u05e8"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"product_name",value:this.state.product_name,onChange:function(t){return e.setState({product_name:t.target.value})},placeholder:"\u05dc\u05d3\u05d5\u05d2\u05de\u05d0: \u05de\u05dc\u05e4\u05e4\u05d5\u05df",required:!0,ref:function(t){e.product_name=t}}))),r.a.createElement("div",{className:"quantity"},r.a.createElement("div",null,r.a.createElement(Re,{icon:"plus",onClick:this.increaseQuantity})),r.a.createElement("div",{className:"number"},this.state.quantity),r.a.createElement("div",null,r.a.createElement(Re,{icon:"minus",onClick:this.decreaseQuantity}))),r.a.createElement("div",{className:"memo"},r.a.createElement("textarea",{value:this.state.memo,placeholder:"\u05d4\u05e2\u05e8\u05d5\u05ea...",onChange:this.handleMemo})),r.a.createElement("footer",null,r.a.createElement("div",{className:"cancel"},r.a.createElement("button",{type:"reset"},"\u05d1\u05d9\u05d8\u05d5\u05dc")),r.a.createElement("div",{className:"confirm"},r.a.createElement("button",{type:"submit"},"\u05d0\u05d9\u05e9\u05d5\u05e8")))))}}]),t}(n.Component)),at=(a(201),function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ue.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"renderFalse",value:function(){return r.a.createElement("div",{className:"false"},r.a.createElement("div",null,r.a.createElement("button",{className:"expand",onClick:this.props.toggle},r.a.createElement(Re,{icon:"ellipsis-v"}))))}},{key:"renderTrue",value:function(){var e=this,t=this.props,a=t.isCreator,n=t.platform,i=t.shoppingMode;return r.a.createElement("div",{className:"true"},r.a.createElement("div",{className:"expand"},r.a.createElement("button",{className:"expand",onClick:this.props.toggle},r.a.createElement(Re,{icon:"times"}))),a&&r.a.createElement("div",{className:"option",onClick:function(){e.props.toggle(),e.props.clearList()}},r.a.createElement("div",{className:"icon"},r.a.createElement(Re,{icon:"broom"})),r.a.createElement("div",{className:"desc"},"\u05e0\u05d9\u05e7\u05d5\u05d9 \u05e8\u05e9\u05d9\u05de\u05d4")),r.a.createElement("div",{className:"option",onClick:function(){e.props.toggle(),e.props.bestShoppingCart()}},r.a.createElement("div",{className:"desc"},"\u05e1\u05dc \u05d4\u05e7\u05e0\u05d9\u05d5\u05ea \u05d4\u05d6\u05d5\u05dc \u05d1\u05d9\u05d5\u05ea\u05e8"),r.a.createElement("div",{className:"icon"},r.a.createElement(Re,{icon:"shopping-cart"}))),r.a.createElement("div",{className:"option",onClick:function(){e.props.toggle(),e.props.shareWhatsapp()}},r.a.createElement("div",{className:"desc"},"\u05e9\u05d9\u05ea\u05d5\u05e3 \u05e8\u05e9\u05d9\u05de\u05d4"),r.a.createElement("div",{className:"icon"},r.a.createElement(Re,{icon:"whatsapp",faType:"fab"}))),("ios"===n||"android"===n)&&r.a.createElement("div",{className:"option shopping-mode",onClick:function(){e.props.toggleShoppingMode()}},r.a.createElement("div",{className:"desc"},"\u05de\u05e6\u05d1 \u05e1\u05d5\u05e4\u05e8\u05de\u05e8\u05e7\u05d8"),r.a.createElement("div",{className:"icon"},r.a.createElement(Re,{icon:i?"toggle-on":"toggle-off"}))))}},{key:"render",value:function(){var e=this.props.isExpand;return r.a.createElement("div",{className:"OptionsToggler ".concat(this.props.className)},e?this.renderTrue():this.renderFalse())}}]),t}(n.Component)),nt=(a(202),function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ue.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"renderFalse",value:function(){var e=this.props.shoppingMode;return r.a.createElement("div",{className:"false"},r.a.createElement("div",null,r.a.createElement("button",{className:"expand",onClick:this.props.toggle},r.a.createElement(Re,{icon:e?"check":"plus"}))))}},{key:"renderTrue",value:function(){var e=this,t=this.props.platform;return r.a.createElement("div",{className:"true"},r.a.createElement("div",{className:"expand"},r.a.createElement("button",{className:"expand",onClick:this.props.toggle},r.a.createElement(Re,{icon:"times"}))),("ios"===t||"android"===t)&&r.a.createElement("div",{className:"option",onClick:function(){e.props.toggle(),e.props.scanBarcode()}},r.a.createElement("div",{className:"icon"},r.a.createElement(Re,{icon:"barcode"})),r.a.createElement("div",{className:"desc"},"\u05e1\u05e8\u05d9\u05e7\u05ea \u05d1\u05e8\u05e7\u05d5\u05d3")),r.a.createElement("div",{className:"option",onClick:function(){e.props.toggle(),e.props.manualProduct()}},r.a.createElement("div",{className:"icon"},r.a.createElement(Re,{icon:"plus"})),r.a.createElement("div",{className:"desc"},"\u05d4\u05d5\u05e1\u05e4\u05d4 \u05d9\u05d3\u05e0\u05d9\u05ea")))}},{key:"render",value:function(){var e=this.props.isExpand;return r.a.createElement("div",{className:"PlusToggler ".concat(this.props.className)},e?this.renderTrue():this.renderFalse())}}]),t}(n.Component)),rt=(a(203),a(204),function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ue.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"toggleCheck",value:function(){var e=this.props.product,t=e.list_id,a=e.id,n=e.isManual?"manual_product":"product";Object(h.API_CALL)("POST","/list/".concat(t,"/").concat(n,"/").concat(a,"/toggleCheck"))}},{key:"render",value:function(){var e=this,t=this.props.product,a=t.quantity>1?r.a.createElement("span",{className:"quantity"},"(",t.quantity,")"):null;return r.a.createElement("div",{className:"Product ".concat(t.isChecked?"checked":null)},r.a.createElement("div",{className:"product",onClick:function(){return e.toggleCheck()}},r.a.createElement("div",{className:"name"},t.product_name,a),r.a.createElement("div",{className:"memo"},t.memo)),r.a.createElement("div",{className:"options",onClick:this.props.onEdit},r.a.createElement(Re,{icon:"ellipsis-v",size:"1x"})))}}]),t}(n.Component)),it=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).state={isExpand:!0},a.toggleExpand=a.toggleExpand.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"toggleExpand",value:function(){var e=!this.state.isExpand;this.setState({isExpand:e})}},{key:"renderProducts",value:function(){var e=this;return B.a.map(this.props.cat,function(t){return r.a.createElement(rt,{key:t.id,product:t,onEdit:function(){return e.props.setProduct(t)}})})}},{key:"render",value:function(){var e=this.props.cat;if(0===e.length)return null;var t=e[0].category_name,a=this.state.isExpand,n=B.a.filter(e,function(e){return 0===e.isChecked}).length;return r.a.createElement("div",{className:"CatGroup"},r.a.createElement("div",{className:"header",onClick:this.toggleExpand},r.a.createElement("div",null,a?"-":"+"),r.a.createElement("div",null,t),r.a.createElement("div",{className:"counter"},"(",n,")")),r.a.createElement("div",{className:"products"},a&&this.renderProducts()))}}]),t}(n.Component),ct=(a(205),a(16)),st=a.n(ct),ot=function(e){var t=e.modifiedAt,a=function(e){var t=st()().startOf("day").diff(st()(e).startOf("day"),"days");return 0===t?"\u05d4\u05d9\u05d5\u05dd":1===t?"\u05d0\u05ea\u05de\u05d5\u05dc":st()(e).year()===st()().year()?"\u05d1\u05ea\u05d0\u05e8\u05d9\u05da "+st()(e).format("DD/MM"):"\u05d1\u05ea\u05d0\u05e8\u05d9\u05da "+st()(e).format("DD/MM/YY")}(t),n=st()(t).format("HH:mm");return r.a.createElement("div",{className:"ModifiedAt"},"\u05e0\u05e2\u05e8\u05da \u05dc\u05d0\u05d7\u05e8\u05d5\u05e0\u05d4",r.a.createElement("div",{className:"date"},a,",\xa0",n))},lt=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).state={product:null,isManual:!1,isOptions:!1,isPlus:!1,platform:"",shoppingMode:!1},a.barcodeScanner=et.a,a.checkListID=a.checkListID.bind(Object(fe.a)(Object(fe.a)(a))),a.setPlatform=a.setPlatform.bind(Object(fe.a)(Object(fe.a)(a))),a.toggleIsManual=a.toggleIsManual.bind(Object(fe.a)(Object(fe.a)(a))),a.toggleIsOptions=a.toggleIsOptions.bind(Object(fe.a)(Object(fe.a)(a))),a.toggleIsPlus=a.toggleIsPlus.bind(Object(fe.a)(Object(fe.a)(a))),a.toggleShoppingMode=a.toggleShoppingMode.bind(Object(fe.a)(Object(fe.a)(a))),a.setProduct=a.setProduct.bind(Object(fe.a)(Object(fe.a)(a))),a.shareWhatsapp=a.shareWhatsapp.bind(Object(fe.a)(Object(fe.a)(a))),a.clearList=a.clearList.bind(Object(fe.a)(Object(fe.a)(a))),a.goBestShoppingCart=a.goBestShoppingCart.bind(Object(fe.a)(Object(fe.a)(a))),a.scanBarcode=a.scanBarcode.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.setPlatform(),setTimeout(this.checkListID,1e3)}},{key:"checkListID",value:function(){var e=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.props.list||this.props.history.push("/");case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setPlatform",value:function(){var e=Object(p.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,be.a.Device.getInfo();case 2:t=e.sent,this.setState({platform:t.platform});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"toggleIsManual",value:function(){var e=!this.state.isManual;this.setState({isManual:e})}},{key:"toggleIsOptions",value:function(){var e=!this.state.isOptions;this.setState({isOptions:e})}},{key:"toggleIsPlus",value:function(){var e=!this.state.isPlus;this.setState({isPlus:e})}},{key:"toggleShoppingMode",value:function(){var e=!this.state.shoppingMode;this.setState({shoppingMode:e})}},{key:"setProduct",value:function(e){this.setState({product:e})}},{key:"renderCatGroups",value:function(){var e=this,t=this.props.list,a=B.a.groupBy(t.products,"category_id");return a.manual=B.a.toArray(t.manual_products),B.a.map(a,function(t,a){return r.a.createElement(it,{key:a,cat:t,setProduct:e.setProduct})})}},{key:"shareWhatsapp",value:function(){var e="",t=this.props.list,a=[].concat(Object(We.a)(B.a.toArray(t.products)),Object(We.a)(B.a.toArray(t.manual_products)));e+="*\u05d4\u05e8\u05e9\u05d9\u05de\u05d4 ".concat(t.list_name," \u05e9\u05d5\u05ea\u05e4\u05d4 \u05de\u05de\u05e2\u05e8\u05db\u05ea \u05d2\u05d5\u05dc\u05d5:* \n\n"),B.a.map(a,function(t){if(t.isChecked)return!1;e+="".concat(t.product_name),t.quantity>1&&(e+=" (".concat(t.quantity,")")),e+="\n"}),window.open("https://wa.me/?text=".concat(encodeURI(e)))}},{key:"clearList",value:function(){if(!1===window.confirm("\u05d4\u05d0\u05dd \u05dc\u05e0\u05e7\u05d5\u05ea \u05d0\u05ea \u05ea\u05d5\u05db\u05df \u05d4\u05e8\u05e9\u05d9\u05de\u05d4?"))return!1;var e=this.props.list;Object(h.API_CALL)("POST","/list/".concat(e.list_id,"/clear"))}},{key:"goBestShoppingCart",value:function(){var e=this.props.list,t="/list/".concat(e.list_id,"/bestShoppingCart");this.props.history.push(t)}},{key:"scanBarcode",value:function(){var e=Object(p.a)(m.a.mark(function e(){var t,a,n,r,i=this;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.platform,n=t.shoppingMode,"android"===a||"ios"===a){e.next=3;break}return e.abrupt("return",!1);case 3:r=this.props.list.list_id,this.barcodeScanner.scan().then(function(){var e=Object(p.a)(m.a.mark(function e(t){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.cancelled){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,Object(h.API_CALL)("POST","/device/scanByMobile/".concat(r,"/").concat(t.text),{shoppingMode:n});case 4:i.state.shoppingMode&&i.scanBarcode();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){return console.log("Error",e)});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.props,a=t.list,n=t.user;if(!a)return null;var i=this.state,c=i.product,s=i.isManual,o=i.isOptions,l=i.isPlus,u=i.platform,d=i.shoppingMode,m=a.creator.mail===n.mail;return r.a.createElement("div",{className:"Page ViewList"},(o||l)&&r.a.createElement("div",{className:"overlay",onClick:function(){return e.setState({isOptions:!1,isPlus:!1})}}),r.a.createElement(Qe,{isOpen:!!c,close:function(){return e.setProduct(null)}},r.a.createElement(tt,{product:c,close:function(){return e.setProduct(null)}})),r.a.createElement(Qe,{isOpen:s,close:function(){return e.toggleIsManual()}},r.a.createElement(tt,{product:null,list:a,close:function(){return e.toggleIsManual()}})),r.a.createElement("header",null,r.a.createElement("div",{className:"right"},r.a.createElement(Be,null)),r.a.createElement("div",{className:"title"},a.list_name),r.a.createElement("div",{className:"left"},r.a.createElement(Re,{icon:"arrow-left",size:"2x",onClick:function(){return e.props.history.goBack()}}))),r.a.createElement("main",{className:"list-products"},this.renderCatGroups()),r.a.createElement("footer",{className:l||o?"no-border":""},r.a.createElement(at,{className:l&&"hidden",isExpand:o,toggle:this.toggleIsOptions,isCreator:m,platform:u,shareWhatsapp:this.shareWhatsapp,clearList:this.clearList,bestShoppingCart:this.goBestShoppingCart,toggleShoppingMode:this.toggleShoppingMode,shoppingMode:d}),!l&&!o&&r.a.createElement(ot,{modifiedAt:a.modified_at}),r.a.createElement(nt,{className:o&&"hidden",isExpand:l,toggle:this.toggleIsPlus,isCreator:m,platform:u,manualProduct:this.toggleIsManual,scanBarcode:this.scanBarcode,shoppingMode:d})))}}]),t}(n.Component),ut=Object(ve.a)(Object(s.b)(function(e,t){var a=e.lists;return{user:e.user,list:a[t.match.params.list_id]}})(lt)),dt=(a(206),a(207),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).viewNotification=a.viewNotification.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"viewNotification",value:function(){var e=this.props.noti.notification_id;this.props.history.push("/notifications/".concat(e))}},{key:"render",value:function(){var e=this.props.noti,t=st()(e.modifiedAt).isSame(st()(),"date");return r.a.createElement("div",{className:"Notification ".concat(!e.isRead&&"unRead"),onClick:this.viewNotification},r.a.createElement("div",{className:"title"},r.a.createElement("div",{className:"primary"},e.title.primary),r.a.createElement("div",{className:"secondary"},e.title.secondary)),r.a.createElement("div",{className:"at"},r.a.createElement("div",{className:"time"},st()(e.modifiedAt).format("HH:mm")),!t&&r.a.createElement("div",{className:"date"},st()(e.modifiedAt).format("DD/MM/YY"))))}}]),t}(n.Component)),mt=Object(ve.a)(dt),pt=(a(208),function(){return r.a.createElement("div",{className:"EmptyNotifications"},r.a.createElement("div",{className:"icon"},r.a.createElement(Re,{icon:"file",faType:"far"})),r.a.createElement("div",{className:"primary"},"\u05e8\u05e9\u05d9\u05de\u05ea \u05d4\u05d4\u05ea\u05e8\u05d0\u05d5\u05ea \u05e8\u05d9\u05e7\u05d4"))}),ht=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ue.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){B.a.filter(this.props.notifications,function(e){return 1===e.isNew}).length>0&&this.props.markUnNew()}},{key:"renderNotifications",value:function(){var e=B.a.values(this.props.notifications);return 0===e.length?r.a.createElement(pt,null):B.a.map(e.reverse(),function(e,t){return r.a.createElement(mt,{key:t,noti:e})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Page Notifications"},r.a.createElement("header",null,r.a.createElement("div",{className:"right"},r.a.createElement(Be,null)),r.a.createElement("div",{className:"title"},"\u05d4\u05ea\u05e8\u05d0\u05d5\u05ea"),r.a.createElement("div",{className:"left"},r.a.createElement(Re,{icon:"arrow-left",size:"2x",onClick:function(){return e.props.history.goBack()}}))),r.a.createElement("main",{className:"list-notifications"},this.renderNotifications()))}}]),t}(n.Component);var ft=Object(s.b)(function(e){return{notifications:e.notifications}},function(e){return Object(o.b)({markUnNew:J},e)})(ht),vt=(a(209),a(226)),bt=(a(210),function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ue.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"isConfirmation",value:function(){var e=this,t=this.props.noti;return 0===t.isConfirm?null:r.a.createElement("footer",{className:"confirmation"},r.a.createElement("button",{onClick:function(){return e.props.confirmNotification(t.notification_id)}},"\u05d0\u05d9\u05e9\u05d5\u05e8"))}},{key:"render",value:function(){var e=this.props.noti,t=e.status;if(!e)return null;var a,n=st()(e.createdAt).isSame(st()(),"date");return 1===t?a="share-alt":2===t||3===t?a="user-times":4!==t&&10!==t||(a="handshake"),r.a.createElement("div",{className:"SharedList"},r.a.createElement("main",null,r.a.createElement("div",{className:"title"},r.a.createElement("div",{className:"topic"},e.title.primary,r.a.createElement("div",{className:"secondary"},e.title.secondary)),r.a.createElement("div",{className:"at"},r.a.createElement("div",{className:"time"},st()(e.createdAt).format("HH:mm")),!n&&r.a.createElement("div",{className:"date"},st()(e.createdAt).format("DD/MM/YY")))),r.a.createElement("div",{className:"img"},r.a.createElement(Re,{icon:a})),r.a.createElement("div",{className:"question"},e.title.secondary)),this.isConfirmation())}}]),t}(n.Component));var Et=Object(s.b)(null,function(e){return Object(o.b)({confirmNotification:$},e)})(bt),Ot=(a(211),a(212),a(213),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).state={data:[],isSelected:!1},a.handleChange=a.handleChange.bind(Object(fe.a)(Object(fe.a)(a))),a.fetchAPI=a.fetchAPI.bind(Object(fe.a)(Object(fe.a)(a))),a.renderOptions=a.renderOptions.bind(Object(fe.a)(Object(fe.a)(a))),a.optionSelected=a.optionSelected.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.fetchAPI()}},{key:"fetchAPI",value:function(){var e=this,t=this.props.api;if(!t)return!1;Object(h.API_CALL)(t.verb,t.url).then(function(t){e.setState({data:t})}).catch(function(t){setTimeout(e.fetchAPI,1e3)})}},{key:"renderOptions",value:function(){var e=this,t=this.props.value;return!(t.length<2||this.state.isSelected)&&B.a.map(this.state.data,function(a){if(a.name.includes(t))return r.a.createElement("div",{className:"option ".concat(/^[a-zA-Z]+$/.test(a.name)&&"english"),key:a.id,onClick:function(){return e.optionSelected(a)}},a.name)})}},{key:"optionSelected",value:function(e){var t={};t.target={name:this.props.name,value:e.name},this.setState({isSelected:!0}),this.props.onChange(t),this.props.onSelect(e.id)}},{key:"handleChange",value:function(e){this.setState({isSelected:!1});var t=e.target.value;this.props.onChange(e);var a=B.a.find(this.state.data,{name:t});this.props.onSelect(a?a.id:0)}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.name,n=e.placeholder;return 0===this.state.data.length?null:r.a.createElement("div",{className:"DataListAPI"},r.a.createElement("input",{type:"text",name:a,value:t,onChange:this.handleChange,placeholder:n,required:!0}),r.a.createElement("div",{className:"options"},this.renderOptions()))}}]),t}(n.Component)),gt=(a(214),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).state={data:[]},a.fetchAPI=a.fetchAPI.bind(Object(fe.a)(Object(fe.a)(a))),a.renderOptions=a.renderOptions.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.fetchAPI()}},{key:"fetchAPI",value:function(){var e=this,t=this.props.api;if(!t)return!1;Object(h.API_CALL)(t.verb,t.url).then(function(t){e.setState({data:t})}).catch(function(t){setTimeout(e.fetchAPI,1e3)})}},{key:"renderOptions",value:function(){return B.a.map(this.state.data,function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})}},{key:"render",value:function(){var e=this.props,t=e.value,a=e.name;return r.a.createElement("select",{className:"SelectAPI ".concat(!t&&"disabled"),value:t,name:a,onChange:this.props.onChange,required:this.props.required},r.a.createElement("option",{value:"",disabled:!0},this.props.placeholder),";",this.renderOptions())}}]),t}(n.Component)),yt=function(e){function t(e){var a;Object(se.a)(this,t);var n=(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).props.noti.product;return a.state={barcode:a.props.barcode,product_name:n?n.product_name.split(" -")[0]:"",category_id:n?n.category_id:"",capacity_unit_id:n?n.capacity_unit_id:"",capacity:n?n.capacity:"",brand_id:n?n.brand_id:"",brand_text:n?n.brand_name:""},a.handleChange=a.handleChange.bind(Object(fe.a)(Object(fe.a)(a))),a.submit=a.submit.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.product_name.focus()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,r={};r[a]=n,this.setState(r)}},{key:"submit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state)}},{key:"render",value:function(){var e=this,t=this.state,a=this.props.noti.product;return r.a.createElement("div",{className:"ModalBarcode"},r.a.createElement("header",{className:"modal-header"},r.a.createElement("div",{className:"title"},a?"\u05e2\u05e8\u05d9\u05db\u05ea \u05de\u05d5\u05e6\u05e8":"\u05de\u05d5\u05e6\u05e8 \u05d7\u05d3\u05e9")),r.a.createElement("form",{onSubmit:this.submit,onReset:function(){return e.props.close()}},r.a.createElement("header",null,"\u05e4\u05e8\u05d8\u05d9 \u05d4\u05de\u05d5\u05e6\u05e8"),r.a.createElement("div",{className:"field"},r.a.createElement("div",null,"\u05d1\u05e8\u05e7\u05d5\u05d3"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"barcode",value:t.barcode,onChange:this.handleChange,required:!0,readOnly:!0}))),r.a.createElement("div",{className:"field"},r.a.createElement("div",null,"\u05e9\u05dd \u05d4\u05de\u05d5\u05e6\u05e8"),r.a.createElement("div",null,r.a.createElement("input",{type:"text",name:"product_name",value:t.product_name,onChange:this.handleChange,placeholder:"\u05dc\u05d3\u05d5\u05d2\u05de\u05d0: \u05e1\u05d1\u05d5\u05df \u05db\u05dc\u05d9\u05dd",required:!0,ref:function(t){e.product_name=t}}))),r.a.createElement("header",null,"\u05e4\u05e8\u05d8\u05d9\u05dd \u05e0\u05d5\u05e1\u05e4\u05d9\u05dd"),r.a.createElement("div",{className:"field row"},r.a.createElement("div",null,"\u05d7\u05d1\u05e8\u05d4"),r.a.createElement("div",null,r.a.createElement(Ot,{api:{verb:"GET",url:"/db/brands"},placeholder:"\u05dc\u05d3\u05d5\u05d2\u05de\u05d0: \u05e4\u05d9\u05d9\u05e8\u05d9",required:!0,name:"brand_text",value:t.brand_text,onChange:this.handleChange,onSelect:function(t){return e.setState({brand_id:t})}}))),r.a.createElement("div",{className:"field row"},r.a.createElement("div",null,"\u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4"),r.a.createElement("div",null,r.a.createElement(gt,{api:{verb:"GET",url:"/db/categories"},placeholder:"\u05d9\u05e9 \u05dc\u05d1\u05d7\u05d5\u05e8 \u05e7\u05d8\u05d2\u05d5\u05e8\u05d9\u05d4",required:!0,name:"category_id",value:t.category_id,onChange:this.handleChange}))),r.a.createElement("div",{className:"field row"},r.a.createElement("div",null,"\u05db\u05de\u05d5\u05ea"),r.a.createElement("div",{className:"multiple"},r.a.createElement("div",null,r.a.createElement("input",{type:"number",name:"capacity",value:t.capacity,onChange:this.handleChange,placeholder:"650",required:!0})),r.a.createElement("div",null,r.a.createElement(gt,{api:{verb:"GET",url:"/db/capacity_units"},placeholder:"\u05d9\u05d7\u05d9\u05d3\u05d4",required:!0,name:"capacity_unit_id",value:t.capacity_unit_id,onChange:this.handleChange})))),r.a.createElement("footer",null,r.a.createElement("div",{className:"cancel"},r.a.createElement("button",{type:"reset"},"\u05d1\u05d9\u05d8\u05d5\u05dc")),r.a.createElement("div",{className:"confirm"},r.a.createElement("button",{type:"submit"},"\u05d0\u05d9\u05e9\u05d5\u05e8")))))}}]),t}(n.Component),jt=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).state={isModal:!1},a.toggleIsModal=a.toggleIsModal.bind(Object(fe.a)(Object(fe.a)(a))),a.submit=a.submit.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"toggleIsModal",value:function(){var e=!this.state.isModal;this.setState({isModal:e})}},{key:"submit",value:function(e){var t=this,a=this.props.noti.notification_id;Object(h.API_CALL)("POST","/notification/".concat(a,"/newProductForm"),{newProduct:e}).then(function(e){t.toggleIsModal()})}},{key:"render",value:function(){var e=this.props.noti,t=e.status;if(!e)return null;var a=e.subject_id,n=st()(e.createdAt).isSame(st()(),"date");return r.a.createElement("div",{className:"ScanNotExists"},r.a.createElement(Qe,{isOpen:this.state.isModal},r.a.createElement(yt,{close:this.toggleIsModal,barcode:e.subject_id,noti:e,onSubmit:this.submit})),r.a.createElement("main",null,r.a.createElement("div",{className:"title"},r.a.createElement("div",{className:"topic"},"\u05de\u05d5\u05e6\u05e8 \u05e0\u05e1\u05e8\u05e7 \u05d5\u05d0\u05d9\u05e0\u05d5 \u05d6\u05d5\u05d4\u05d4",r.a.createElement("div",{className:"barcode"},"\u05d1\u05e8\u05e7\u05d5\u05d3: ",a,10===t&&r.a.createElement("div",null,"\u05e4\u05e8\u05d8\u05d9 \u05d4\u05de\u05d5\u05e6\u05e8 \u05e0\u05e9\u05dc\u05d7\u05d5 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"))),r.a.createElement("div",{className:"at"},r.a.createElement("div",{className:"time"},st()(e.createdAt).format("HH:mm")),!n&&r.a.createElement("div",{className:"date"},st()(e.createdAt).format("DD/MM/YY")))),r.a.createElement("div",{className:"img"},r.a.createElement(Re,{icon:"barcode"})),r.a.createElement("div",{className:"question"},1===t&&r.a.createElement("div",null,"\u05d4\u05d0\u05dd \u05d1\u05e8\u05e6\u05d5\u05e0\u05da \u05dc\u05ea\u05e8\u05d5\u05dd \u05dc\u05e7\u05d4\u05d9\u05dc\u05ea \u05d2\u05d5\u05dc\u05d5",r.a.createElement("br",null),"\u05d5\u05dc\u05d4\u05d5\u05e1\u05d9\u05e3 \u05d0\u05ea \u05e4\u05e8\u05d8\u05d9 \u05d4\u05de\u05d5\u05e6\u05e8?"),10===t&&r.a.createElement("div",null,r.a.createElement("div",{className:"primary"},"\u05e4\u05e8\u05d8\u05d9 \u05d4\u05de\u05d5\u05e6\u05e8 \u05e0\u05e9\u05dc\u05d7\u05d5 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),r.a.createElement("br",null),r.a.createElement("br",null),"\u05ea\u05d5\u05d3\u05d4 \u05e8\u05d1\u05d4 \u05e2\u05dc \u05ea\u05e8\u05d5\u05de\u05ea\u05da \u05dc\u05de\u05e2\u05e8\u05db\u05ea Gulo"))),1===t&&r.a.createElement("footer",null,r.a.createElement("button",{onClick:this.toggleIsModal},"\u05d4\u05d5\u05e1\u05e3 \u05de\u05d5\u05e6\u05e8 \u05dc\u05de\u05d0\u05d2\u05e8")))}}]),t}(n.Component),Nt=(a(215),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).state={isModal:!1},a.toggleIsModal=a.toggleIsModal.bind(Object(fe.a)(Object(fe.a)(a))),a.renderVerifyQuestion=a.renderVerifyQuestion.bind(Object(fe.a)(Object(fe.a)(a))),a.renderVerified=a.renderVerified.bind(Object(fe.a)(Object(fe.a)(a))),a.renderOverwrited=a.renderOverwrited.bind(Object(fe.a)(Object(fe.a)(a))),a.overwrite=a.overwrite.bind(Object(fe.a)(Object(fe.a)(a))),a.verify=a.verify.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"toggleIsModal",value:function(){var e=!this.state.isModal;this.setState({isModal:e})}},{key:"verify",value:function(){var e=this.props.noti,t=e.notification_id,a=e.product;Object(h.API_CALL)("POST","/notification/".concat(t,"/verifyProduct"),{product:a}).then(function(e){console.log(e)})}},{key:"overwrite",value:function(e){var t=this,a=this.props.noti.notification_id;Object(h.API_CALL)("POST","/notification/".concat(a,"/overwriteProduct"),{product:e}).then(function(e){t.toggleIsModal()})}},{key:"renderVerifyQuestion",value:function(){var e=this.props.noti;return console.log(e),r.a.createElement("div",{className:"VerifyQuestion"},r.a.createElement("div",{className:"product-details"},r.a.createElement("div",{className:"product-name"},e.product.product_name),r.a.createElement("div",null,r.a.createElement("div",null,"\u05de\u05d7\u05dc\u05e7\u05d4:"),r.a.createElement("div",null,e.product.category_name)),r.a.createElement("div",null,r.a.createElement("div",null,"\u05de\u05d5\u05ea\u05d2:"),r.a.createElement("div",null,e.product.brand_name)),r.a.createElement("div",null,r.a.createElement("div",null,"\u05db\u05de\u05d5\u05ea:"),r.a.createElement("div",null,e.product.capacity," ",e.product.unit_name))))}},{key:"renderOverwrited",value:function(){var e=this.props.noti.product;return r.a.createElement("div",{className:"Overwrited"},r.a.createElement("div",{className:"product-name"},e.barcode," - ",e.product_name),r.a.createElement("div",{className:"desc"},"\u05e0\u05e2\u05e8\u05da \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),r.a.createElement("div",{className:"thanks"},"\u05ea\u05d5\u05d3\u05d4 \u05e8\u05d1\u05d4 \u05e2\u05dc \u05ea\u05e8\u05d5\u05de\u05ea\u05da \u05dc\u05de\u05e2\u05e8\u05db\u05ea Gulo"))}},{key:"renderVerified",value:function(){var e=this.props.noti.product;return r.a.createElement("main",{className:"Verified"},r.a.createElement("div",{className:"product-name"},e.barcode," - ",e.product_name),r.a.createElement("div",{className:"desc"},"\u05d0\u05d9\u05de\u05d5\u05ea \u05d4\u05ea\u05e7\u05d1\u05dc"),r.a.createElement("div",{className:"thanks"},"\u05ea\u05d5\u05d3\u05d4 \u05e8\u05d1\u05d4 \u05e2\u05dc \u05ea\u05e8\u05d5\u05de\u05ea\u05da \u05dc\u05de\u05e2\u05e8\u05db\u05ea Gulo"))}},{key:"render",value:function(){var e=this.props.noti,t=e.status;if(!e)return null;var a=e.subject_id,n=st()(e.createdAt).isSame(st()(),"date");return r.a.createElement("div",{className:"VerifyProduct"},r.a.createElement(Qe,{isOpen:this.state.isModal},r.a.createElement(yt,{close:this.toggleIsModal,barcode:e.subject_id,noti:e,onSubmit:this.overwrite})),r.a.createElement("main",null,r.a.createElement("div",{className:"title"},r.a.createElement("div",{className:"topic"},"\u05de\u05d5\u05e6\u05e8 \u05e0\u05e1\u05e8\u05e7 \u05d5\u05d0\u05d9\u05e0\u05d5 \u05d6\u05d5\u05d4\u05d4",r.a.createElement("div",{className:"barcode"},"\u05d1\u05e8\u05e7\u05d5\u05d3: ",a,1===t&&r.a.createElement("div",null,"\u05de\u05de\u05ea\u05d9\u05df \u05dc\u05d0\u05d9\u05de\u05d5\u05ea"),10===t&&r.a.createElement("div",null,"\u05d4\u05de\u05d5\u05e6\u05e8 \u05d0\u05d5\u05de\u05ea"),100===t&&r.a.createElement("div",null,"\u05d4\u05de\u05d5\u05e6\u05e8 \u05e0\u05e2\u05e8\u05da \u05de\u05d7\u05d3\u05e9"))),r.a.createElement("div",{className:"at"},r.a.createElement("div",{className:"time"},st()(e.createdAt).format("HH:mm")),!n&&r.a.createElement("div",{className:"date"},st()(e.createdAt).format("DD/MM/YY")))),r.a.createElement("div",{className:"img ".concat((1===t||10===t)&&"smaller")},r.a.createElement(Re,{icon:"barcode"})),r.a.createElement("div",{className:"memo"},1===t&&this.renderVerifyQuestion(),10===t&&this.renderVerified(),100===t&&this.renderOverwrited())),1===t&&r.a.createElement("footer",null,r.a.createElement("button",{onClick:this.verify},"\u05d0\u05d9\u05de\u05d5\u05ea \u05de\u05d5\u05e6\u05e8"),r.a.createElement("button",{className:"secondary",onClick:this.toggleIsModal},"\u05e2\u05e8\u05d9\u05db\u05d4")))}}]),t}(n.Component)),kt=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).renderNotification=a.renderNotification.bind(Object(fe.a)(Object(fe.a)(a))),a.deleteNotification=a.deleteNotification.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.noti;if(!e)return r.a.createElement(vt.a,{to:"/notifications"});0===e.isRead&&this.props.markRead(this.props.noti.notification_id)}},{key:"renderNotification",value:function(){var e=this.props.noti;switch(e.notification_type_id){case 1:return r.a.createElement(Et,{noti:e});case 3:return r.a.createElement(jt,{noti:e});case 4:return r.a.createElement(Nt,{noti:e});default:return null}}},{key:"deleteNotification",value:function(){var e=this.props.noti;this.props.deleteNotification(e.notification_id),this.props.history.goBack()}},{key:"render",value:function(){var e=this,t=this.props.noti;return t?r.a.createElement("div",{className:"Page ViewNotification"},r.a.createElement("header",null,r.a.createElement("div",{className:"right"},r.a.createElement(Re,{className:"trash",icon:"trash",hoverColor:"red",onClick:this.deleteNotification})),r.a.createElement("div",{className:"title"},t.topic),r.a.createElement("div",{className:"left"},r.a.createElement(Re,{icon:"arrow-left",size:"2x",onClick:function(){return e.props.history.goBack()}}))),this.renderNotification()):null}}]),t}(n.Component);var _t=Object(ve.a)(Object(s.b)(function(e,t){return{noti:e.notifications[t.match.params.notification_id]}},function(e){return Object(o.b)({markRead:Z,deleteNotification:X},e)})(kt)),Ct=(a(216),a(217),function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).state={isExpand:!1},a.toggleExpand=a.toggleExpand.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"toggleExpand",value:function(){var e=!this.state.isExpand;this.setState({isExpand:e})}},{key:"renderExpand",value:function(){var e=this.props,t=e.cart,a=e.products,n=B.a.differenceBy(a,t.products,"barcode");return r.a.createElement("div",{className:"expand"},B.a.map(t.products,function(e){return r.a.createElement("div",{key:e.barcode,className:"row"},r.a.createElement("div",null,e.product_name),r.a.createElement("div",null,e.price))}),r.a.createElement("div",{className:"missing-products"},B.a.map(n,function(e){return r.a.createElement("div",{key:e.barcode,className:"row"},r.a.createElement("div",null,e.product_name),r.a.createElement("div",null,"-"))})),r.a.createElement("div",{className:"total"},r.a.createElement("div",{className:"row"},r.a.createElement("div",null,'\u05e1\u05d4"\u05db'),r.a.createElement("div",null,"\u20aa",t.total_price))))}},{key:"render",value:function(){var e=this.props,t=e.cart,a=e.products,n=this.state.isExpand;if(!t)return null;var i=B.a.differenceBy(a,t.products,"barcode");return r.a.createElement("div",{className:"ShoppingCart",onClick:this.toggleExpand},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:t.firm_logo,alt:""})),r.a.createElement("main",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",null,"\u05e2\u05dc\u05d5\u05ea:"),r.a.createElement("div",null,t.total_price," \u20aa")),i.length>0&&r.a.createElement("div",{className:"row"},r.a.createElement("div",null,"\u05de\u05e1\u05e4\u05e8 \u05d7\u05d5\u05e1\u05e8\u05d9\u05dd: "),r.a.createElement("div",null,i.length)),n&&this.renderExpand()))}}]),t}(n.Component)),St=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).state={carts:[]},a.fetchCarts=a.fetchCarts.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.fetchCarts()}},{key:"fetchCarts",value:function(){var e=Object(p.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.list){e.next=4;break}return setTimeout(this.fetchCarts,300),e.abrupt("return",!1);case 4:return e.next=6,Object(h.API_CALL)("GET","/list/".concat(t.list_id,"/bestShoppingCart"));case 6:a=e.sent,this.setState({carts:a});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderShoppingCarts",value:function(){var e=this,t=this.state.carts;return t=B.a.sortBy(t,["total_price"],"asc"),t=B.a.orderBy(t,function(e){return e.products.length},"desc"),B.a.map(t,function(t){return r.a.createElement(Ct,{key:t.shopping_cart_firm_id,cart:t,products:B.a.toArray(e.props.list.products)})})}},{key:"render",value:function(){var e=this,t=this.props.list;return t?r.a.createElement("div",{className:"Page BestShoppingCart"},r.a.createElement("header",null,r.a.createElement("div",{className:"right"},r.a.createElement(Be,null)),r.a.createElement("div",{className:"title"},r.a.createElement("div",{className:"primary"},"\u05e1\u05dc \u05d4\u05e7\u05e0\u05d9\u05d5\u05ea \u05d4\u05d6\u05d5\u05dc \u05d1\u05d9\u05d5\u05ea\u05e8"),r.a.createElement("div",{className:"secondary"},t.list_name)),r.a.createElement("div",{className:"left"},r.a.createElement(Re,{icon:"arrow-left",size:"2x",onClick:function(){return e.props.history.goBack()}}))),r.a.createElement("main",{className:"cart-list"},this.renderShoppingCarts())):null}}]),t}(n.Component),It=Object(s.b)(function(e,t){return{list:e.lists[t.match.params.list_id]}})(St),wt=function(e){function t(e){var a;return Object(se.a)(this,t),(a=Object(le.a)(this,Object(ue.a)(t).call(this,e))).fetchData=a.fetchData.bind(Object(fe.a)(Object(fe.a)(a))),a}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.fetchData()}},{key:"componentDidUpdate",value:function(e){!e.user&&this.props.user&&this.fetchData()}},{key:"fetchData",value:function(){if(!this.props.user)return!1;this.props.fetchLists(),this.props.fetchNotifications()}},{key:"render",value:function(){var e=this.props.user;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,null),e&&r.a.createElement("div",{className:"Gulo"},r.a.createElement(Me,null),r.a.createElement(Fe,null),r.a.createElement(pe.a,null,r.a.createElement(he.a,{path:"/list/:list_id/bestShoppingCart",component:It}),r.a.createElement(he.a,{path:"/list/:list_id",component:ut}),r.a.createElement(he.a,{path:"/notifications/:notification_id",component:_t}),r.a.createElement(he.a,{path:"/notifications",component:ft}),r.a.createElement(he.a,{path:"/",component:Xe}))))}}]),t}(n.Component);var Lt=Object(s.b)(function(e){return{user:e.user}},function(e){return Object(o.b)({fetchLists:P,fetchNotifications:K},e)})(wt),At=a(63),Pt=(a(220),{apiKey:"AIzaSyBlxcBAVAM29clBfxFsKQrzzNy24SZPzNw",authDomain:"gulo-234107.firebaseapp.com",databaseURL:"https://gulo-234107.firebaseio.com",projectId:"gulo-234107",storageBucket:"gulo-234107.appspot.com",messagingSenderId:"180978526897",appId:"1:180978526897:web:5390c8092f6d8f2c"});At.initializeApp(Pt);var Mt=be.a.StatusBar,xt=be.a.Device,Tt=function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(ue.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(oe.a)(t,[{key:"componentDidMount",value:function(){this.hideStatusBar(),this.props.setFirebase(At)}},{key:"hideStatusBar",value:function(){var e=Object(p.a)(m.a.mark(function e(){return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xt.getInfo();case 2:"web"!==e.sent.platform&&Mt.hide();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(me.a,null,r.a.createElement(pe.a,null,r.a.createElement(he.a,{path:"/Login",component:_e}),r.a.createElement(he.a,{path:"/",component:Lt})))}}]),t}(n.Component);var Dt=Object(s.b)(null,function(e){return Object(o.b)({setFirebase:ie},e)})(Tt),Rt=Object(o.a)(u.a)(o.d);c.a.render(r.a.createElement(s.a,{store:Rt(ce)},r.a.createElement(Dt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[108,1,2]]]);
//# sourceMappingURL=main.cefe835a.chunk.js.map