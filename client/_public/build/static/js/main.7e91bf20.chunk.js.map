{"version":3,"sources":["consts/index.js","serviceWorker.js","actions/user/index.js","reducers/user_reducer.js","actions/list/index.js","actions/list/product/index.js","actions/list/manual_product/index.js","reducers/lists_reducer.js","actions/notification/index.js","reducers/notifications_reducer.js","actions/UI/index.js","reducers/isMenu_reducer.js","actions/socket/index.js","reducers/socket_reducer.js","actions/firebase/index.js","reducers/firebase_reducer.js","reducers/index.js","plugins/Storage/index.js","components/Login/oAuthHandler.js","components/Login/Login.js","components/Login/index.js","FontAwesomeLib.js","components/Gulo/SocketListener/SocketListener.js","components/Gulo/SocketListener/index.js","components/VerifyAuth/VerifyAuth.js","components/VerifyAuth/index.js","components/Misc/Icon/index.js","components/Misc/Icon/Icon.js","components/Misc/MenuToggler/MenuToggler.js","components/Misc/MenuToggler/index.js","components/Gulo/SideMenu/SideMenu.js","components/Gulo/SideMenu/index.js","components/Gulo/Lists/EmptyList/index.js","components/Gulo/Lists/EmptyList/EmptyList.js","components/Gulo/Lists/List/index.js","components/Gulo/Lists/List/List.js","components/Misc/MyModal/MyModal.js","components/Misc/MyModal/index.js","components/Misc/RadiosAPI/index.js","components/Misc/RadiosAPI/RadiosAPI.js","components/Gulo/Lists/ModalList/ListShares/index.js","components/Gulo/Lists/ModalList/ListShares/ListShares.js","components/Gulo/Lists/ModalList/ModalList.js","components/Gulo/Lists/ModalList/index.js","components/Gulo/Lists/Lists.js","components/Gulo/Lists/index.js","components/Gulo/ViewList/ModalProduct/index.js","components/Gulo/ViewList/ModalProduct/ModalProduct.js","components/Gulo/ViewList/OptionsToggler/index.js","components/Gulo/ViewList/OptionsToggler/OptionsToggler.js","components/Gulo/ViewList/PlusToggler/index.js","components/Gulo/ViewList/PlusToggler/PlusToggler.js","components/Gulo/ViewList/Product/index.js","components/Gulo/ViewList/Product/Product.js","components/Gulo/ViewList/CatGroup/index.js","components/Gulo/ViewList/CatGroup/CatGroup.js","components/Gulo/ViewList/ModifiedAt/index.js","components/Gulo/ViewList/ModifiedAt/ModifiedAt.js","components/Gulo/ViewList/ViewList.js","components/Gulo/ViewList/index.js","components/Gulo/Notifications/Notification/Notification.js","components/Gulo/Notifications/Notification/index.js","components/Gulo/Notifications/EmptyNotifications/index.js","components/Gulo/Notifications/EmptyNotifications/EmptyNotifications.js","components/Gulo/Notifications/Notifications.js","components/Gulo/Notifications/index.js","components/Gulo/ViewNotification/SharedList/SharedList.js","components/Gulo/ViewNotification/SharedList/index.js","components/Misc/DataListAPI/index.js","components/Misc/DataListAPI/DataListAPI.js","components/Misc/SelectAPI/index.js","components/Misc/SelectAPI/SelectAPI.js","components/Gulo/ViewNotification/ModalBarcode/index.js","components/Gulo/ViewNotification/ModalBarcode/ModalBarcode.js","components/Gulo/ViewNotification/ScanNotExists/index.js","components/Gulo/ViewNotification/ScanNotExists/ScanNotExists.js","components/Gulo/ViewNotification/VerifyProduct/index.js","components/Gulo/ViewNotification/VerifyProduct/VerifyProduct.js","components/Gulo/ViewNotification/ViewNotification.js","components/Gulo/ViewNotification/index.js","components/Gulo/BestShoppingCart/ShoppingCart/index.js","components/Gulo/BestShoppingCart/ShoppingCart/ShoppingCart.js","components/Gulo/BestShoppingCart/BestShoppingCart.js","components/Gulo/BestShoppingCart/index.js","components/Gulo/Gulo.js","components/Gulo/index.js","firebaseConfig.js","Router.js","index.js"],"names":["URI","axios","require","window","location","hostname","includes","console","log","concat","module","exports","API_CALL","verb","path","data","Promise","resolve","reject","url","method","withCredentials","then","res","catch","err","Boolean","match","LOGIN","AUTO_LOGIN","VERIFY_AUTH","SET_USER","LOGOUT","login","user","req","type","payload","verifyAuth","setUser","_callee","regenerator_default","a","wrap","_context","prev","next","abrupt","stop","FETCH_LISTS","INSERT_LIST","UPDATE_LIST","DELETE_LIST","UPDATE_LIST_MODIFIED_AT","fetchLists","insertList","list","UPDATE_LIST_PRODUCT","DELETE_LIST_PRODUCT","UPDATE_LIST_MANUAL_PRODUCT","DELETE_LIST_MANUAL_PRODUCT","FETCH_NOTIFICATIONS","MARK_UNNEW","MARK_READ","CONFIRM_NOTIFICATION","INSERT_NOTIFICATION","DELETE_NOTIFICATION","UPDATE_NOTIFICATION","UPDATE_FIREBASE_NOTIFICATION_TOKEN","fetchNotifications","markUnNew","markRead","notification_id","confirmNotification","deleteNotification","TOGGLE_MENU","toggleMenu","SUBSCRIBE_SOCKET","SET_FIREBASE","setFirebase","firebase","rootReducer","combineReducers","state","arguments","length","undefined","action","error","lists","newState","product","mapLists","_","keyBy","forOwn","val","key","products","manual_products","newList","Object","objectSpread","defineProperty","list_id","updatedList","objectWithoutProperties","map","_toPropertyKey","id","cloneDeep","product_id","modified_at","notifications","updatedNotification","noti_id","newNotification","notifications_reducer_toPropertyKey","isRead","isMenu","socket","disconnect","Device","Plugins","Storage","setItem","_setItem","asyncToGenerator","mark","value","_ref","platform","storage","getInfo","sent","localStorage","t0","set","_x","_x2","apply","this","getItem","_getItem","_callee2","_ref2","ret","_context2","get","_x3","removeItem","_removeItem","_callee3","_ref3","_context3","remove","_x4","clear","_clear","_callee4","_context4","oAuthHandler","rememberUser","_rememberUser","authToken","mail","google","_google","googleProvider","idToken","auth","GoogleAuthProvider","signInWithPopup","currentUser","getIdToken","provider","e","message","GooglePlus","webClientId","facebook","_facebook","facebookProvider","FacebookAuthProvider","code","alert","Facebook","authResponse","accessToken","_verifyAuth","logout","_logout","_callee5","_ref4","_context5","signOut","_x5","Login","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","googleLogin","bind","assertThisInitialized","facebookLogin","prevProps","authCB","history","replace","react_default","createElement","className","onClick","Component","withRouter","connect","dispatch","bindActionCreators","library","add","faBars","faSearch","faHome","faEllipsisV","faPlus","faMinus","faUndo","faDesktop","faHotel","faArchive","faFile","faArrowLeft","faTrash","faClipboardList","faComment","farComment","faPowerOff","faBarcode","faBell","faTimes","faShareAlt","faWhatsapp","faBroom","faHandshake","faUserTimes","faShoppingCart","faToggleOn","faToggleOff","faCheck","SocketListener","pushNotifications","PushNotifications","device","listen","subscribeSocket","io","on","_this2","updateList","deleteList","listProduct","updateListProduct","cb","deleteListProduct","updateListModifiedAt","updateListManualProduct","deleteListManualProduct","insertNotification","notification","deviceInfo","register","addListener","token","updateFirebaseNotificationToken","emit","VerifyAuth","push","Icon","hover","toggleHover","setState","_this$props","icon","title","size","style","hoverStyle","faType","color","hoverColor","theStyle","react_fontawesome_index_es","onMouseEnter","onMouseLeave","MenuToggler","unReadCounter","filter","noti","Misc_Icon","toggleStatus","SideMenu","link","to","Misc_MenuToggler","src","pic","alt","firstname","lastname","marginRight","actions_user_logout","EmptyList","List","background","list_type_color","showList","list_type_icon","list_name","creator","fullname","editList","Modal","defaultStyles","overlay","backgroundColor","MyModal","react_modal_lib_default","isOpen","ariaHideApp","shouldCloseOnOverlayClick","onRequestClose","close","children","RadiosAPI","options","fetchAPI","api","setTimeout","_this3","name","option","bg","readOnly","target","renderRadios","ListShares","status","users","isValid","isSelected","handleChange","fetchUsers","validateInsert","renderOptions","prevState","shares","redirectToLogin","share","validateRemove","Manager","unshift","preventDefault","_this$state","isExists","find","onInsert","isCreator","confirm","onRemove","_this4","opt","toLowerCase","user_id","optionSelected","_this$state2","onChange","placeholder","renderSharesList","ModalList","list_type","list_type_id","device_id","device_password","password","shares_deleted","shares_inserted","submit","insertShare","removeShare","delete","_e$target","stateObj","toConsumableArray","sd","si","s","response","onSubmit","onReset","required","Misc_RadiosAPI","ModalList_ListShares","Lists","isModal","toggleIsModal","addEventListener","ev","Lists_List","Lists_EmptyList","Misc_MyModal","Lists_ModalList","renderLists","renderEmpty","ModalProduct","product_name","quantity","memo","increaseQuantity","decreaseQuantity","handleMemo","update","new","focus","p_route","isManual","_this5","ref","input","OptionsToggler","toggle","shoppingMode","clearList","bestShoppingCart","shareWhatsapp","toggleShoppingMode","isExpand","renderTrue","renderFalse","PlusToggler","scanBarcode","manualProduct","Product","_this$props$product","Quantity","isChecked","toggleCheck","onEdit","CatGroup","toggleExpand","cat","ViewList_Product","setProduct","cat_name","category_name","unCheckedProducts","renderProducts","ModifiedAt","modifiedAt","dateStr","dateDiff","moment","startOf","diff","year","format","getDateStr","timeStr","ViewList","isOptions","isPlus","barcodeScanner","BarcodeScanner","checkListID","setPlatform","toggleIsManual","toggleIsOptions","toggleIsPlus","goBestShoppingCart","cats","groupBy","manual","toArray","i","ViewList_CatGroup","text","arr","p","open","encodeURI","scan","barcode","cancelled","ViewList_ModalProduct","goBack","renderCatGroups","ViewList_OptionsToggler","ViewList_ModifiedAt","ViewList_PlusToggler","ownProps","params","Notification","viewNotification","isToday","isSame","primary","secondary","EmptyNotifications","Notifications","isNew","values","Notifications_EmptyNotifications","reverse","Notifications_Notification","renderNotifications","SharedList","isConfirm","createdAt","isConfirmation","DataListAPI","test","onSelect","SelectAPI","disabled","ModalBarcode","split","category_id","capacity_unit_id","capacity","brand_id","brand_text","brand_name","Misc_DataListAPI","Misc_SelectAPI","ScanNotExists","newProduct","subject_id","ViewNotification_ModalBarcode","VerifyProduct","renderVerifyQuestion","renderVerified","renderOverwrited","overwrite","verify","_this$props$noti","unit_name","ViewNotification","renderNotification","Redirect","notification_type_id","ViewNotification_SharedList","ViewNotification_ScanNotExists","ViewNotification_VerifyProduct","topic","ShoppingCart","cart","missing_products","differenceBy","price","total_price","_this$props2","firm_logo","renderExpand","BestShoppingCart","carts","fetchCarts","sortBy","orderBy","BestShoppingCart_ShoppingCart","shopping_cart_firm_id","renderShoppingCarts","Gulo","fetchData","Fragment","components_VerifyAuth","Gulo_SocketListener","Gulo_SideMenu","Switch","Route","component","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","StatusBar","Router","hideStatusBar","hide","BrowserRouter","createStoreWithMiddleware","applyMiddleware","ReduxPromise","createStore","ReactDOM","render","es","store","reducers","src_Router","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7e91bf20.chunk.js","sourcesContent":["const axios = require('axios');\r\n\r\nlet URI;\r\nif(process.env.NODE_ENV==='production')\r\n  URI = \"https://montv10.net:9400\";  // URI = \"http://10.0.2.2:9400\";\r\nif(window.location.hostname.includes('montv10.net'))\r\n  URI = \"https://montv10.net:9400\";\r\n\r\nif(!URI)\r\n  URI = \"http://localhost:9400\";\r\n\r\nconsole.log(`service-url: ${URI}`);\r\n\r\nconst API_CALL = (verb, path, data) => {\r\n  return new Promise((resolve, reject) => {\r\n    let url = `${URI}${path}`;\r\n    //console.log(`API_CALL: ${url}`);\r\n\r\n    axios(url, {\r\n      method: verb,\r\n      withCredentials: true,\r\n      data\r\n    }).then((res) => {\r\n      resolve(res.data);\r\n    }).catch((err) => {\r\n      //console.log(`API_CALL ERROR`);\r\n      //console.log(err);\r\n      reject(err);\r\n    })\r\n  });\r\n}\r\n\r\nmodule.exports = {\r\n  API_CALL,\r\n  URI\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {API_CALL} from '../../consts';\r\n\r\nexport const LOGIN            =   'FIREBASE_LOGIN';\r\nexport const AUTO_LOGIN       =   'AUTO_LOGIN';\r\nexport const VERIFY_AUTH      =   'VERIFY_AUTH';\r\nexport const SET_USER         =   'SET_USER';\r\nexport const LOGOUT           =   'LOGOUT';\r\n\r\nexport function login(user){\r\n  const req = API_CALL('POST', '/user/login', user);\r\n\r\n  return{\r\n    type: LOGIN,\r\n    payload: req\r\n  };\r\n}\r\n\r\nexport function autoLogin(email){\r\n  const req = API_CALL('POST', '/user/login/auto-login', {email});\r\n\r\n  return{\r\n    type: AUTO_LOGIN,\r\n    payload: req\r\n  };\r\n}\r\n\r\nexport function verifyAuth(){\r\n  const user = API_CALL('POST', '/user/login/auth-test');\r\n  return{\r\n    type: VERIFY_AUTH,\r\n    payload: user\r\n  };\r\n}\r\nexport function setUser(user){\r\n  return{\r\n    type: SET_USER,\r\n    payload: user\r\n  };\r\n}\r\n\r\nexport async function logout(){\r\n  const req = API_CALL('POST', '/user/logout');\r\n  return{\r\n    type: LOGOUT,\r\n    payload: req\r\n  };\r\n}\r\n","import {LOGIN, AUTO_LOGIN, VERIFY_AUTH, SET_USER, LOGOUT} from '../actions/user/index';\r\n\r\nexport default function(state=null, action){\r\n  switch(action.type){\r\n    case VERIFY_AUTH:\r\n    case SET_USER:\r\n    case AUTO_LOGIN:\r\n    case LOGIN:\r\n      if(action.error){\r\n        console.log(\"login failed\");\r\n        return null;\r\n      }\r\n      return action.payload;\r\n    case LOGOUT:\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {API_CALL} from '../../consts';\r\n\r\nexport const FETCH_LISTS              =   'FETCH_LISTS';\r\nexport const INSERT_LIST              =   'INSERT_LIST';\r\nexport const UPDATE_LIST              =   'UPDATE_LIST';\r\nexport const DELETE_LIST              =   'DELETE_LIST';\r\nexport const UPDATE_LIST_MODIFIED_AT  = 'UPDATE_LIST_MODIFIED_AT';\r\n\r\nexport function fetchLists(){\r\n  const req = API_CALL('GET', '/list');\r\n  return{\r\n    type: FETCH_LISTS,\r\n    payload: req\r\n  };\r\n}\r\n\r\nexport function insertList(list){\r\n  return {\r\n    type: INSERT_LIST,\r\n    payload: list\r\n  }\r\n}\r\nexport function deleteList(list_id){\r\n  return {\r\n    type: DELETE_LIST,\r\n    payload: list_id\r\n  }\r\n}\r\nexport function updateList(list){\r\n  return {\r\n    type: UPDATE_LIST,\r\n    payload: list\r\n  }\r\n}\r\n\r\nexport function updateListModifiedAt(list_id, modified_at){  \r\n  return {\r\n    type: UPDATE_LIST_MODIFIED_AT,\r\n    payload: {list_id, modified_at}\r\n  }\r\n}\r\n","//import {API_CALL} from '../../consts';\r\n\r\nexport const UPDATE_LIST_PRODUCT          =      'UPDATE_LIST_PRODUCT';\r\nexport const DELETE_LIST_PRODUCT          =      'DELETE_LIST_PRODUCT';\r\n\r\nexport function updateListProduct(product){\r\n  return{\r\n    type: UPDATE_LIST_PRODUCT,\r\n    payload: product\r\n  };\r\n}\r\n\r\nexport function deleteListProduct(list_id, product_id){\r\n  return {\r\n    type: DELETE_LIST_PRODUCT,\r\n    payload: {list_id, product_id}\r\n  }\r\n}\r\n","//import {API_CALL} from '../../consts';\r\n\r\nexport const UPDATE_LIST_MANUAL_PRODUCT   =      'UPDATE_LIST_MANUAL_PRODUCT';\r\nexport const DELETE_LIST_MANUAL_PRODUCT   =      'DELETE_LIST_MANUAL_PRODUCT';\r\n\r\nexport function updateListManualProduct(product){\r\n  return{\r\n    type: UPDATE_LIST_MANUAL_PRODUCT,\r\n    payload: product\r\n  };\r\n}\r\n\r\nexport function deleteListManualProduct(list_id, product_id){\r\n  return {\r\n    type: DELETE_LIST_MANUAL_PRODUCT,\r\n    payload: {list_id, product_id}\r\n  }\r\n}\r\n","import {FETCH_LISTS, INSERT_LIST, UPDATE_LIST, DELETE_LIST, UPDATE_LIST_MODIFIED_AT}  from '../actions/list';\r\nimport {UPDATE_LIST_PRODUCT, DELETE_LIST_PRODUCT}                                     from '../actions/list/product';\r\nimport {UPDATE_LIST_MANUAL_PRODUCT, DELETE_LIST_MANUAL_PRODUCT}                       from '../actions/list/manual_product';\r\nimport _ from 'lodash';\r\n\r\nexport default function(state={}, action){\r\n  let newState, product;\r\n\r\n  switch(action.type){\r\n    case FETCH_LISTS:\r\n      if(action.error){\r\n        console.log(\"fetch lists failed\");\r\n        return state;\r\n      }\r\n\r\n      let mapLists = _.keyBy(action.payload, 'list_id'); //convert array to mapped object\r\n      _.forOwn(mapLists, (val,key) => {\r\n        val.products        =   _.keyBy(val.products, 'id') //map products array to mapped object\r\n        val.manual_products =   _.keyBy(val.manual_products, 'id') //map products array to mapped object\r\n      })\r\n      //console.log(mapLists);\r\n      return mapLists;\r\n\r\n    case INSERT_LIST:\r\n      let newList = action.payload;\r\n      return { ...state, [newList.list_id]: newList };\r\n\r\n    case UPDATE_LIST:\r\n      let updatedList = action.payload;\r\n      return { ...state, [updatedList.list_id]: updatedList };\r\n\r\n    case DELETE_LIST:\r\n      let list_id = action.payload;\r\n      const {[list_id]: value, ...listsAfterDelete } = state;\r\n      return listsAfterDelete;\r\n\r\n    case UPDATE_LIST_PRODUCT:\r\n      product = action.payload;\r\n      return {...state, [product.list_id]: {...state[product.list_id], 'products': {...state[product.list_id]['products'], [product.id]:  product}}};\r\n\r\n    case UPDATE_LIST_MANUAL_PRODUCT:\r\n      product = action.payload;\r\n      return {...state, [product.list_id]: {...state[product.list_id], 'manual_products': {...state[product.list_id]['manual_products'], [product.id]:  product}}};\r\n\r\n    case DELETE_LIST_PRODUCT:\r\n      newState = _.cloneDeep(state);\r\n      delete newState[action.payload.list_id].products[action.payload.product_id];\r\n      return newState;\r\n\r\n    case DELETE_LIST_MANUAL_PRODUCT:\r\n      newState = _.cloneDeep(state);\r\n      delete newState[action.payload.list_id].manual_products[action.payload.product_id];\r\n      return newState;\r\n\r\n    case UPDATE_LIST_MODIFIED_AT:\r\n      return {...state, [action.payload.list_id]: {...state[action.payload.list_id], 'modified_at': action.payload.modified_at}};\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import {API_CALL} from '../../consts';\r\n\r\nexport const FETCH_NOTIFICATIONS    =   'FETCH_NOTIFICATIONS';\r\nexport const MARK_UNNEW             =   'MARK_UNNEW';\r\nexport const MARK_READ              =   'MARK_READ';\r\nexport const CONFIRM_NOTIFICATION   =   'CONFIRM_NOTIFICATION';\r\nexport const INSERT_NOTIFICATION    =   'INSERT_NOTIFICATION';\r\nexport const DELETE_NOTIFICATION    =   'DELETE_NOTIFICATION';\r\nexport const UPDATE_NOTIFICATION    =   'UPDATE_NOTIFICATION';\r\nexport const UPDATE_FIREBASE_NOTIFICATION_TOKEN = 'UPDATE_FIREBASE_NOTIFICATION_TOKEN';\r\n\r\nexport function fetchNotifications(){\r\n  const req = API_CALL('GET', '/notification');\r\n  return{\r\n    type: FETCH_NOTIFICATIONS,\r\n    payload: req\r\n  };\r\n}\r\n\r\nexport function markUnNew(){\r\n  const req = API_CALL('POST', '/notification/unNew');\r\n  return{\r\n    type: MARK_UNNEW,\r\n    payload: req\r\n  };\r\n}\r\n\r\nexport function markRead(notification_id){\r\n  const req = API_CALL('POST', `/notification/${notification_id}/markRead`);\r\n  return{\r\n    type: MARK_READ,\r\n    payload: req\r\n  };\r\n}\r\n\r\nexport function confirmNotification(notification_id){\r\n  const req = API_CALL('POST', `/notification/${notification_id}/confirm`);\r\n  return{\r\n    type: CONFIRM_NOTIFICATION,\r\n    payload: req\r\n  };\r\n}\r\n\r\nexport function insertNotification(notification){\r\n  return {\r\n    type: INSERT_NOTIFICATION,\r\n    payload: notification\r\n  }\r\n}\r\n\r\nexport function deleteNotification(notification_id){\r\n  const req = API_CALL('DELETE', `/notification/${notification_id}`);\r\n  return {\r\n    type: DELETE_NOTIFICATION,\r\n    payload: req\r\n  }\r\n}\r\n\r\nexport function updateNotification(notification){\r\n  return {\r\n    type: UPDATE_NOTIFICATION,\r\n    payload: notification\r\n  }\r\n}\r\n\r\nexport function updateFirebaseNotificationToken(token){\r\n  const req = API_CALL('POST', `/notification/updateFirebaseNotificationToken`, {token});\r\n  return {\r\n    type: UPDATE_FIREBASE_NOTIFICATION_TOKEN,\r\n    payload: req\r\n  }\r\n}\r\n","import {FETCH_NOTIFICATIONS, MARK_UNNEW, MARK_READ, CONFIRM_NOTIFICATION, INSERT_NOTIFICATION, DELETE_NOTIFICATION, UPDATE_NOTIFICATION} from '../actions/notification';\r\nimport _ from 'lodash';\r\n\r\nexport default function(state=[], action){\r\n  let mapNotis, updatedNotification, noti_id;\r\n  switch(action.type){\r\n    case FETCH_NOTIFICATIONS:\r\n      if(action.error){\r\n        console.log(\"fetch lists failed\");\r\n        return state;\r\n      }\r\n      //console.log('FETCH');\r\n      mapNotis = _.keyBy(action.payload, 'notification_id'); //convert array to mapped object\r\n      return mapNotis;\r\n\r\n    case INSERT_NOTIFICATION:\r\n      //console.log('INSERT');\r\n      let newNotification = action.payload;\r\n      return { ...state, [newNotification.notification_id]: newNotification };\r\n\r\n    case DELETE_NOTIFICATION:\r\n      //console.log('DELETE');\r\n      noti_id = action.payload.notification_id;\r\n      const {[noti_id]: value, ...notificationsAfterDelete } = state;\r\n      return notificationsAfterDelete;\r\n\r\n    case UPDATE_NOTIFICATION:\r\n      //console.log('UPDATE');\r\n      updatedNotification = action.payload;\r\n      return { ...state, [updatedNotification.notification_id]: updatedNotification };\r\n\r\n    case MARK_UNNEW:\r\n      //console.log('MARK_UNNEW');\r\n      mapNotis = _.keyBy(action.payload, 'notification_id'); //convert array to mapped object\r\n      return mapNotis;\r\n\r\n    case MARK_READ:\r\n      //console.log('MARK_READ');\r\n      noti_id = action.payload.notification_id;\r\n      return { ...state, [noti_id]: {...state[noti_id], 'isRead': 1}};\r\n\r\n    case CONFIRM_NOTIFICATION:\r\n      //console.log('CONFIRM_NOTIFICATION');\r\n      updatedNotification = action.payload;\r\n      return { ...state, [updatedNotification.notification_id]: updatedNotification };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export const TOGGLE_MENU      =   'TOGGLE_MENU';\r\n\r\nexport function toggleMenu(){\r\n  return{\r\n    type: TOGGLE_MENU,\r\n    payload: {}\r\n  };\r\n}\r\n","import {TOGGLE_MENU} from '../actions/UI';\r\nimport {LOGOUT} from '../actions/user';\r\n\r\nexport default function(state=false, action){\r\n  switch(action.type){\r\n    case TOGGLE_MENU:\r\n      return !(state);\r\n    case LOGOUT:\r\n      return false;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export const SUBSCRIBE_SOCKET       =     'SUBSCRIBE_SOCKET'\r\n\r\nexport function subscribeSocket(socket, user){\r\n  //console.log(`socket: ${socket.id} connected`);\r\n  socket.emit('subscribe', user);\r\n  return{\r\n    type: SUBSCRIBE_SOCKET,\r\n    payload: socket\r\n  };\r\n}\r\n","import {SUBSCRIBE_SOCKET} from '../actions/socket';\r\nimport {LOGOUT} from '../actions/user/index';\r\n\r\nexport default function(state=null, action){\r\n  switch(action.type){\r\n    case SUBSCRIBE_SOCKET:      \r\n      return action.payload;\r\n    case LOGOUT:\r\n      if(state)\r\n        state.disconnect(); //disconnect socket\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","export const SET_FIREBASE     =   'SET_FIREBASE';\r\n\r\nexport function setFirebase(firebase){\r\n  return{\r\n    type: SET_FIREBASE,\r\n    payload: firebase\r\n  };\r\n}\r\n","import {SET_FIREBASE} from '../actions/firebase';\r\n\r\nexport default function(state=null, action){\r\n  switch(action.type){\r\n    case SET_FIREBASE:\r\n      return action.payload;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n","import { combineReducers } from 'redux';\r\nimport userReducer            from './user_reducer';\r\nimport listsReducer           from './lists_reducer';\r\nimport notificationsReducer   from './notifications_reducer';\r\nimport isMenuReducer          from './isMenu_reducer';\r\nimport socketReducer          from './socket_reducer';\r\nimport firebaseReducer        from './firebase_reducer';\r\n\r\nconst rootReducer = combineReducers({\r\n    user:           userReducer,\r\n    lists:          listsReducer,\r\n    notifications:  notificationsReducer,\r\n    isMenu:         isMenuReducer,\r\n    socket:         socketReducer,\r\n    firebase:       firebaseReducer\r\n});\r\n\r\nexport default rootReducer;\r\n","import {Plugins} from '@capacitor/core';\nconst {Device} = Plugins;\n\nconst Storage = {\n  setItem: async (key, value) => {\n    let {platform} = await Device.getInfo();\n    let storage = (platform==='web') ? window.localStorage : Plugins.Storage;\n    switch(platform){\n      case 'web':\n        await storage.setItem(key, value);\n        break;\n\n      case 'android':\n      case 'ios':\n        await storage.set({key, value});\n        break;\n\n      default:\n    }\n  },\n  getItem: async (key) => {\n    let {platform} = await Device.getInfo();\n    let storage = (platform==='web') ? window.localStorage : Plugins.Storage;\n\n    switch(platform){\n      case 'web':\n        return await storage.getItem(key);\n\n      case 'android':\n      case 'ios':\n        let ret = await storage.get({key});\n        return ret.value;\n\n      default:\n    }\n  },\n  removeItem: async (key) => {\n    let {platform} = await Device.getInfo();\n    let storage = (platform==='web') ? window.localStorage : Plugins.Storage;\n    switch(platform){\n      case 'web':\n        await storage.removeItem(key);\n        return;\n\n      case 'android':\n      case 'ios':\n        await storage.remove({key});\n        return;\n\n      default:\n    }\n  },\n  clear: async () => {\n    await Storage.removeItem('mail');\n    await Storage.removeItem('authToken');\n  }\n}\n\nexport default Storage;\n","import {Plugins}                            from '@capacitor/core';\r\nimport { GooglePlus }                       from '@ionic-native/google-plus';\r\nimport { Facebook }                         from '@ionic-native/facebook';\r\nimport { API_CALL }                         from '../../consts';\r\nimport Storage                              from '../../plugins/Storage';\r\nconst {Device} = Plugins;\r\n\r\nconst oAuthHandler = { //firebase for web login\r\n  login: {\r\n    rememberUser: async (user) => {\r\n      await Storage.setItem('authToken', user.authToken);\r\n      await Storage.setItem('mail', user.mail);\r\n    },\r\n    google: async (firebase) => {\r\n      const {platform} = await Device.getInfo();\r\n      switch(platform){\r\n        case 'web':\r\n            const googleProvider = new firebase.auth.GoogleAuthProvider();\r\n            return firebase.auth().signInWithPopup(googleProvider).then((user) => {\r\n              return firebase.auth().currentUser.getIdToken(true).then((idToken) => {\r\n                return {idToken, provider: 'firebase'};\r\n              })\r\n            }).catch((e) => console.log(e.message));\r\n\r\n        case 'android':\r\n        case 'ios':\r\n            let {idToken} = await GooglePlus.login({'webClientId': '180978526897-pa56t6sljm8hb1td5be3o2jdhopqbdj4.apps.googleusercontent.com'});\r\n            return {idToken, provider: 'google'};\r\n        default:\r\n          return null;\r\n      }\r\n    },\r\n    facebook: async(firebase) => {\r\n      const {platform} = await Device.getInfo();\r\n      switch(platform){\r\n        case 'web':\r\n            const facebookProvider = new firebase.auth.FacebookAuthProvider();\r\n            return firebase.auth().signInWithPopup(facebookProvider).then((user) => {\r\n              return firebase.auth().currentUser.getIdToken(true).then((idToken) => {\r\n                return {idToken, provider: 'firebase'};\r\n              })\r\n            }).catch((e) => {\r\n              if(e.code==='auth/account-exists-with-different-credential')\r\n                alert('מייל זה כבר משוייך להתחברות מגוגל. \\nיש להתחבר באמצעות גוגל');\r\n                return {};\r\n            });\r\n\r\n        case 'android':\r\n        case 'ios':\r\n            const res =   await   Facebook.login(['public_profile','email']);\r\n            if(!res)\r\n              return null;\r\n            return {idToken: res.authResponse.accessToken, provider: 'facebook'}\r\n        default:\r\n          return null;\r\n      }\r\n    }\r\n  },\r\n  verifyAuth: async (user) => {\r\n    const mail        =   await Storage.getItem('mail');\r\n    const authToken   =   await Storage.getItem('authToken');\r\n\r\n    if(!authToken || !mail)\r\n      return null;\r\n\r\n    return API_CALL('POST', '/user/login/byAuthToken', {authToken, mail}).then((user) => {\r\n      return user;\r\n    }).catch((e) => {\r\n      return null;\r\n    });\r\n  },\r\n  logout: async (firebase) => {\r\n    const {platform} = await Device.getInfo();\r\n\r\n    if(firebase && firebase.auth().currentUser) //for web client\r\n      await firebase.auth().signOut();\r\n\r\n    if(platform==='ios' || platform==='android'){\r\n      GooglePlus.logout();\r\n      GooglePlus.disconnect();\r\n    }\r\n\r\n\r\n    await Storage.clear();\r\n    console.log(`logout`);\r\n  }\r\n}\r\n\r\nexport default oAuthHandler;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport {connect}                    from 'react-redux';\r\nimport {bindActionCreators}         from 'redux';\r\nimport {login, verifyAuth}          from '../../actions/user/index.js';\r\nimport {withRouter}                 from 'react-router-dom';\r\nimport oAuthHandler                 from './oAuthHandler';\r\n\r\nclass Login extends Component{\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.googleLogin      =   this.googleLogin.bind(this);\r\n    this.facebookLogin    =   this.facebookLogin.bind(this);\r\n    this.login            =   this.login.bind(this);\r\n  }\r\n  componentDidUpdate(prevProps){\r\n    if(!prevProps.user && this.props.user)\r\n      this.login();\r\n  }\r\n\r\n  async googleLogin(){\r\n    const authCB = await oAuthHandler.login.google(this.props.firebase);\r\n    if(authCB)\r\n      this.props.login(authCB);\r\n  }\r\n\r\n  async facebookLogin(){\r\n    const authCB = await oAuthHandler.login.facebook(this.props.firebase);    \r\n    if(authCB)\r\n      this.props.login(authCB);\r\n  }\r\n  async login(){\r\n    await oAuthHandler.login.rememberUser(this.props.user);\r\n    this.props.history.replace('/lists');\r\n  }\r\n\r\n  render(){\r\n    return(\r\n      <div className=\"Login\">\r\n        <div className='top'>\r\n          <div className='logo'>\r\n            <div className='cover'/>\r\n          </div>\r\n          <div className='wave'/>\r\n        </div>\r\n        <main>\r\n          <div className='welcome'>\r\n            <div className='primary'>Welcome</div>\r\n            <div className='secondary'>Sign in to discover the best of Gulo</div>\r\n          </div>\r\n          <div className='login-options'>\r\n            <div className='google circle' onClick={this.googleLogin}></div>\r\n            <div className='facebook circle' onClick={this.facebookLogin}></div>\r\n          </div>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\nfunction mapStateToProps({user, firebase}){\r\n  return {user, firebase};\r\n}\r\nfunction mapDispatchToProps(dispatch){\r\n  return bindActionCreators({login, verifyAuth}, dispatch);\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps,mapDispatchToProps)(Login));\r\n","import Login from './Login';\r\nexport default Login;\r\n","import { library } from '@fortawesome/fontawesome-svg-core'\r\nimport { faBars, faSearch, faEllipsisV, faPlus, faMinus, faUndo } from '@fortawesome/free-solid-svg-icons';\r\nimport { faHome, faDesktop, faHotel, faArchive, faArrowLeft, faTrash, faShareAlt, faShoppingCart} from '@fortawesome/free-solid-svg-icons';\r\nimport { faClipboardList, faComment, faPowerOff, faBarcode, faTimes, faBroom, faHandshake, faUserTimes} from '@fortawesome/free-solid-svg-icons';\r\nimport { faToggleOn, faToggleOff, faCheck } from '@fortawesome/free-solid-svg-icons';\r\n\r\n\r\nimport { faFile, faComment as farComment, faBell} from '@fortawesome/free-regular-svg-icons';\r\nimport { faWhatsapp} from '@fortawesome/free-brands-svg-icons';\r\n\r\nlibrary.add(\r\n  faBars, faSearch, faHome, faEllipsisV, faPlus, faMinus, faUndo,\r\n  faDesktop, faHotel, faArchive, faFile, faArrowLeft, faTrash,\r\n  faClipboardList, faComment, farComment, faPowerOff, faBarcode, faBell, faTimes,\r\n  faShareAlt, faWhatsapp, faBroom, faHandshake, faUserTimes, faShoppingCart,\r\n  faToggleOn, faToggleOff, faCheck\r\n);\r\n\r\nexport default library;\r\n","import {Component} from 'react';\r\nimport io                                                           from 'socket.io-client';\r\nimport {connect}                                                    from 'react-redux';\r\nimport {insertList, updateList, deleteList, updateListModifiedAt}   from '../../../actions/list';\r\nimport {updateListProduct, deleteListProduct}                       from '../../../actions/list/product';\r\nimport {updateListManualProduct, deleteListManualProduct}           from '../../../actions/list/manual_product';\r\nimport {subscribeSocket}                                            from '../../../actions/socket';\r\nimport {insertNotification, deleteNotification}                     from '../../../actions/notification';\r\nimport {updateFirebaseNotificationToken}                            from '../../../actions/notification';\r\nimport {URI}                                                        from '../../../consts'\r\nimport { Plugins }                                                  from '@capacitor/core';\r\n\r\nclass SocketListener extends Component{\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.pushNotifications =  Plugins.PushNotifications;\r\n    this.device            =  Plugins.Device;\r\n    this.listen = this.listen.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    this.listen();\r\n  }\r\n  componentDidUpdate(prevProps){\r\n    if(!prevProps.user && this.props.user)\r\n      this.listen();\r\n  }\r\n  async listen(){\r\n    if(!this.props.user) return false;\r\n    let {subscribeSocket} = this.props;\r\n    const socket = io(URI);\r\n\r\n    socket.on('connect', () => {\r\n      subscribeSocket(socket, this.props.user);\r\n\r\n      socket.on('newList', (newList) => this.props.insertList(newList));\r\n      socket.on('listUpdated', (updatedList) => this.props.updateList(updatedList));\r\n      socket.on('listDeleted', (list_id) => this.props.deleteList(list_id));\r\n      socket.on('updateListProduct', (listProduct) => this.props.updateListProduct(listProduct));\r\n      socket.on('deleteListProduct', (cb) => this.props.deleteListProduct(cb.list_id, cb.product_id));\r\n      socket.on('updateListModifiedAt', (cb) => this.props.updateListModifiedAt(cb.list_id, cb.modified_at));\r\n\r\n      socket.on('updateListManualProduct', (listProduct) => this.props.updateListManualProduct(listProduct));\r\n      socket.on('deleteListManualProduct', (cb) => this.props.deleteListManualProduct(cb.list_id, cb.product_id));\r\n\r\n      socket.on('newNotification',    (newNotification) => this.props.insertNotification(newNotification));\r\n      socket.on('updateNotification', (notification)    => this.props.insertNotification(notification)); //in reducer: update&insert functionallity is the same.\r\n      socket.on('deleteNotification', (notification_id) => this.props.deleteNotification(notification_id));\r\n    });\r\n\r\n    let deviceInfo = await this.device.getInfo();\r\n    if(deviceInfo.platform==='android' || deviceInfo.platform==='ios'){\r\n      this.pushNotifications.register();\r\n      this.pushNotifications.addListener('registration', (token) => {\r\n        this.props.updateFirebaseNotificationToken(token.value);\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  render(){return null}\r\n}\r\n\r\nconst mapStateToProps = ({user, socket}) => {return {user, socket} };\r\n\r\nexport default connect(mapStateToProps, {subscribeSocket, insertList, updateListProduct, deleteListProduct, updateList, deleteList, insertNotification, deleteNotification, updateListManualProduct, deleteListManualProduct, updateFirebaseNotificationToken, updateListModifiedAt})(SocketListener);\r\n","import SocketListener from './SocketListener';\r\nexport default SocketListener;\r\n","import {Component}          from 'react';\r\nimport {withRouter}         from 'react-router-dom';\r\nimport {connect}            from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport {setUser}            from '../../actions/user';\r\nimport oAuthHandler         from '../Login/oAuthHandler';\r\n\r\nclass VerifyAuth extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.verifyAuth =   this.verifyAuth.bind(this);\r\n    this.logout     =   this.logout.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    this.verifyAuth();\r\n\r\n  }\r\n  componentDidUpdate(prevProps){\r\n    if(prevProps.user && !this.props.user)\r\n      this.logout();\r\n  }\r\n  async verifyAuth(){\r\n    if(this.props.user) return true;\r\n    let user = await oAuthHandler.verifyAuth(this.props.user); //for the autoLogin next time\r\n    if(!user)\r\n      this.props.history.push('login');\r\n\r\n    this.props.setUser(user);\r\n  }\r\n  async logout(){\r\n    await oAuthHandler.logout(this.props.firebase);\r\n    this.props.history.push(`/login`);\r\n  }\r\n  render(){\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction mapStateToProps({user, firebase}){\r\n  return {user, firebase};\r\n}\r\nfunction mapDispatchToProps(dispatch){\r\n  return bindActionCreators({setUser}, dispatch);\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps,mapDispatchToProps)(VerifyAuth));\r\n","import VerifyAuth from './VerifyAuth';\r\nexport default VerifyAuth;\r\n","import Icon from './Icon';\r\nexport default Icon;\r\n","import React, {Component} from 'react';\r\nimport './style.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\n\r\nclass Icon extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {hover: false};\r\n\r\n    this.toggleHover = this.toggleHover.bind(this);\r\n  }\r\n  toggleHover(){\r\n    this.setState({hover: !this.state.hover});\r\n  }\r\n  render(){\r\n    let {className, icon, title, size, style, hoverStyle, onClick, faType} = this.props;\r\n    let color = !this.state.hover ? this.props.color : this.props.hoverColor;\r\n    let theStyle = !this.state.hover ? style: hoverStyle;\r\n    return(\r\n      <FontAwesomeIcon className={`Icon ${className} ${icon}`} onMouseEnter={this.toggleHover} onMouseLeave={this.toggleHover}\r\n        icon={[faType || 'fas',icon]} color={color} size={size} title={title} onClick={onClick} style={theStyle} />\r\n    );\r\n  }\r\n}\r\n\r\nexport default Icon;\r\n","import React,{Component} from 'react';\r\nimport './style.scss';\r\nimport _ from 'lodash';\r\nimport Icon from '../Icon';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport {toggleMenu} from '../../../actions/UI';\r\n\r\n\r\nclass MenuToggler extends Component{\r\n  toggleStatus(){\r\n    this.props.toggleMenu();\r\n  }\r\n  render(){\r\n    let {notifications} = this.props;\r\n    //const newCounter    = _.filter(notifications, (noti) => noti.isNew===1).length;\r\n    const unReadCounter = _.filter(notifications, (noti) => noti.isRead===0).length;\r\n\r\n    return(\r\n      <div className='MenuToggler'>\r\n        {unReadCounter>0 &&<div className='badger'>\r\n          {unReadCounter}\r\n        </div>}\r\n        <Icon icon='bars' size='2x' onClick={() => this.toggleStatus()} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({notifications}) => {return {notifications}};\r\nfunction mapDispatchToProps(dispatch){\r\n  return bindActionCreators({toggleMenu}, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(MenuToggler);\r\n","import MenuToggler from './MenuToggler';\r\nexport default MenuToggler;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport _ from 'lodash';\r\nimport {withRouter}         from 'react-router-dom';\r\nimport {connect}            from 'react-redux';\r\nimport {logout}             from '../../../actions/user';\r\nimport {toggleMenu}         from '../../../actions/UI';\r\nimport MenuToggler          from '../../Misc/MenuToggler';\r\nimport Icon                 from '../../Misc/Icon';\r\n\r\nclass SideMenu extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.link     =   this.link.bind(this);\r\n  }\r\n  link(to){\r\n    this.props.history.push(to);\r\n    this.props.toggleMenu();\r\n  }\r\n  render(){\r\n    let {isMenu, user, notifications} = this.props;\r\n    //const newCounter    = _.filter(notifications, (noti) => noti.isNew===1).length;\r\n    let unReadCounter = _.filter(notifications, (noti) => noti.isRead===0).length;\r\n\r\n    //if(!isMenu) return null;\r\n    return(\r\n      <div className={`SideMenu ${!isMenu && 'hidden'}`}>\r\n        <div className='overlay' onClick={() => this.props.toggleMenu()}></div>\r\n        <main>\r\n          <div className='toggler'><MenuToggler /></div>\r\n          <div className='profile'>\r\n            <div className='pic'>\r\n              <img src={user.pic} alt='' />\r\n            </div>\r\n            <div className='username'>\r\n              {user.firstname} {user.lastname}\r\n            </div>\r\n            <div className='hr' />\r\n          </div>\r\n          <menu className={`${!isMenu && 'hidden'}`}>\r\n\r\n            <div className='row'  onClick={() => this.link('/lists')}>\r\n              <div className='icon' style={{marginRight:'+3px'}}><Icon icon='clipboard-list' /></div>\r\n              <div className='title'>הרשימות שלי</div>\r\n            </div>\r\n            <div className='row' onClick={() => this.link('/notifications')}>\r\n              <div className='icon notifications'>\r\n                  {/*<span className='counter'>{unReadCounter}</span>*/}\r\n                  {unReadCounter>0 &&<div className='badger'>\r\n                    {unReadCounter}\r\n                  </div>}\r\n                  <Icon faType='far' icon='bell' />\r\n              </div>\r\n              <div className='title'>התראות</div>\r\n            </div>\r\n            <div className='row' onClick={() => this.props.logout(this.props.firebase)}>\r\n              <div className='icon'><Icon icon='power-off' /></div>\r\n              <div className='title'>התנתקות</div>\r\n            </div>\r\n\r\n          </menu>\r\n          <footer>\r\n            <div>Gulo</div>\r\n          </footer>\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({user, isMenu, notifications, firebase}) => {return {user, isMenu, notifications, firebase} };\r\n\r\nexport default withRouter(connect(mapStateToProps, {logout, toggleMenu})(SideMenu));\r\n","import SideMenu from './SideMenu';\r\nexport default SideMenu;\r\n","import EmptyList from './EmptyList';\r\nexport default EmptyList;\r\n","import React from 'react';\r\nimport './style.scss';\r\nimport Icon from '../../../Misc/Icon';\r\n\r\nconst EmptyList = () => {\r\n  return(\r\n    <div className='EmptyList'>\r\n      <div className=\"icon\"><Icon icon=\"file\" faType=\"far\"/></div>\r\n      <div className='primary'>אין לך רשימות עדיין</div>\r\n      <div className='secondary'>לחץ על ה\"+\" כדי להתחיל</div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EmptyList;\r\n","import List from './List';\r\nexport default List;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport Icon from '../../../Misc/Icon';\r\n\r\nclass List extends Component{\r\n  render(){\r\n    let {list} = this.props;\r\n    return(\r\n      <div className='List'>\r\n        <div className='icon' style={{background: list.list_type_color}} onClick={this.props.showList}><Icon icon={list.list_type_icon} size='2x'/></div>\r\n        <div className='title' onClick={this.props.showList}>\r\n          <div className='name'>{list.list_name}</div>\r\n          {/*<div className='total'><span className='total'>({list.total_products} פריטים)</span></div>*/}\r\n          <div className='mail'>{list.creator.fullname}</div>\r\n        </div>\r\n        <div className='options' onClick={this.props.editList}><Icon icon='ellipsis-v' size='2x' /></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default List;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport Modal from 'react-modal';\r\nModal.defaultStyles.overlay.backgroundColor = 'rgba(0,0,0,0.4)';\r\n\r\nclass MyModal extends Component{\r\n  render(){\r\n    return(\r\n      <Modal\r\n        isOpen={this.props.isOpen}\r\n        ariaHideApp={false}\r\n        className={`Modal ${this.props.className}`}\r\n        shouldCloseOnOverlayClick={true}\r\n        onRequestClose={this.props.close}\r\n      >\r\n          {this.props.children}\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MyModal;\r\n","import MyModal from './MyModal';\r\nexport default MyModal;\r\n","import RadiosAPI from './RadiosAPI';\r\nexport default RadiosAPI;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport _ from 'lodash';\r\nimport {API_CALL} from '../../../consts';\r\n\r\nclass RadiosAPI extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {options: []};\r\n\r\n    this.fetchAPI = this.fetchAPI.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    this.fetchAPI();\r\n  }\r\n  fetchAPI(){\r\n    let {api} = this.props;\r\n    if(!api) return false;\r\n    API_CALL(api.verb, api.url).then((options) => {\r\n      this.setState({options});\r\n    }).catch((e) => {\r\n      setTimeout(this.fetchAPI, 1000);\r\n    });\r\n  }\r\n  renderRadios(){\r\n    let {name, value} = this.props;\r\n    let {options} = this.state;\r\n    let radios = _.map(options, (option) => {\r\n      let bg = {backgroundColor: option.id===value ? option.color : ''};\r\n      let onClick = this.props.readOnly ? null : () => this.props.onClick({target: {name, value: option.id}});\r\n      return <div key={option.id} style={bg} onClick={onClick}>{option.name}</div>\r\n    })\r\n    return radios;\r\n  }\r\n  render(){\r\n    return (\r\n      <div className='RadioTypes'>\r\n        {this.renderRadios()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default RadiosAPI;\r\n","import ListShares from './ListShares';\r\nexport default ListShares;\r\n","import React, {Component} from 'react'\r\nimport './style.scss';\r\nimport Icon from '../../../../Misc/Icon';\r\nimport {API_CALL} from '../../../../../consts';\r\nimport _ from 'lodash';\r\n\r\nclass ListShares extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {status: false, users: [], value: '', isValid: true, isSelected: false}\r\n\r\n    this.handleChange     =       this.handleChange.bind(this);\r\n    this.toggleStatus     =       this.toggleStatus.bind(this);\r\n    this.fetchUsers       =       this.fetchUsers.bind(this);\r\n    this.validateInsert   =       this.validateInsert.bind(this);\r\n    this.renderOptions    =       this.renderOptions.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    this.fetchUsers()\r\n  }\r\n  componentDidUpdate(prevProps, prevState){\r\n    if(prevProps.shares!==this.props.shares)\r\n      this.setState({status: false, value: ''});\r\n  }\r\n  fetchUsers(){\r\n    API_CALL('GET', '/user/getAllUsersButMe').then((users) => {\r\n      console.log(users);\r\n      this.setState({users});\r\n    }).catch((e) => {\r\n      this.setState({redirectToLogin: true})\r\n    });\r\n  }\r\n  toggleStatus(){\r\n    let status = !(this.state.status);\r\n    this.setState({status});\r\n  }\r\n  renderDataListOptions(){\r\n    let {users} = this.state;\r\n    let options = _.map(users, (user) => {\r\n      return <option key={user.mail} value={user.mail}>{user.mail}</option>\r\n    })\r\n    return options;\r\n  }\r\n  renderSharesList(){\r\n    let {creator} = this.props;\r\n    let shares = _.map(this.props.shares, (share) => {\r\n      return (\r\n        <div className='share' key={share.mail} onClick={() => this.validateRemove(share)}>\r\n          <div className='pic'><img src={share.pic} alt=''/></div>\r\n          <div className='details'>\r\n            <div className='name'>{share.fullname}</div>\r\n            <div className='mail'>{share.mail}</div>\r\n          </div>\r\n        </div>\r\n      );\r\n    });\r\n    if(creator){ //add manager to list\r\n      let Manager = (<div className='share manager' key={creator.mail}>\r\n                      <div className='pic'><img src={creator.pic} alt=''/></div>\r\n                      <div className='details'>\r\n                        <div className='name'>מנהל: {creator.fullname}</div>\r\n                        <div className='mail'>{creator.mail}</div>\r\n                      </div>\r\n                    </div>\r\n                  );\r\n       shares.unshift(Manager);\r\n    }\r\n    return <div className='shares-list'>{shares}</div>;\r\n  }\r\n  handleChange(e){\r\n    let {value} = e.target;\r\n    this.setState({value, isValid: true, isSelected: false});\r\n  }\r\n  validateInsert(e){\r\n    e.preventDefault();\r\n    let {value, users} = this.state;\r\n    let match = _.filter(users, (user) => user.mail === value);\r\n    let isExists = _.find(this.props.shares, {mail: value});\r\n    if(match.length===0 || isExists){\r\n      this.setState({isValid: false});\r\n      return false;\r\n    }\r\n    this.props.onInsert(match[0]);\r\n  }\r\n  validateRemove(share){\r\n    let {isCreator} = this.props;\r\n    if(!isCreator) return false;\r\n\r\n    if(!window.confirm(`האם להסיר מהקבוצה את המשתמש\\n${share.fullname}?`));\r\n    this.props.onRemove(share);\r\n  }\r\n  renderOptions(){\r\n    let {value} = this.state;\r\n    if(value.length < 2 || this.state.isSelected)\r\n      return false;\r\n\r\n    let Options = _.map(this.state.users, (opt) => {\r\n      if(opt.fullname.toLowerCase().includes(value.toLowerCase()) || opt.mail.toLowerCase().includes(value.toLowerCase()))\r\n        return  <div  className='option' key={opt.user_id}\r\n                      onClick={() => this.optionSelected(opt)}>\r\n                  <div>{opt.fullname}</div>\r\n                  <div>{opt.mail}</div>\r\n                </div>\r\n    })\r\n    return Options;\r\n  }\r\n  optionSelected(opt){\r\n    this.setState({value: opt.mail, isSelected: true});\r\n  }\r\n  render(){\r\n    let {status, value, isValid} = this.state;\r\n    let {isCreator} = this.props;\r\n\r\n    return(\r\n      <div className='ListShares'>\r\n        {isCreator &&\r\n          <div className='toggle-row'>\r\n            <div onClick={this.toggleStatus}>\r\n              <Icon icon={status ? 'minus' : 'plus'} /> &nbsp;\r\n              {status ? 'ביטול הוספת שותף' : 'הוסף שותף לרשימה'}\r\n            </div>\r\n            {status && <div><button className='btn-plus' onClick={this.validateInsert}><Icon icon='plus' /></button></div>}\r\n          </div>\r\n        }\r\n        {status &&\r\n          <div>\r\n            <input type='text' value={value} className={`ltr ${isValid ? '' : 'invalid'}`}\r\n                  onChange={this.handleChange} placeholder='Search by Mail or Name...' />\r\n            <div className='options'>\r\n              {this.renderOptions()}\r\n            </div>\r\n          </div>\r\n        }\r\n\r\n        {!status && this.renderSharesList()}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ListShares\r\n/*\r\n<input  className={`ltr ${isValid ? '' : 'invalid'}`}  type='text'\r\n        value={value} onChange={this.handleChange} placeholder=\"Search partner by Fullname or Email...\"\r\n/>\r\n<div className='options'>\r\n  {this.renderOptions()}\r\n</div>\r\n*/\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport _ from 'lodash';\r\nimport {connect}            from 'react-redux'\r\nimport {bindActionCreators} from 'redux';\r\nimport {insertList}         from '../../../../actions/list';\r\n\r\nimport {API_CALL}   from '../../../../consts';\r\nimport RadiosAPI    from '../../../Misc/RadiosAPI';\r\nimport ListShares   from './ListShares';\r\nimport Icon         from  '../../../Misc/Icon';\r\n\r\nclass ModalList extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    let {list, user} = this.props;\r\n    let creator = list ? list.creator : user;\r\n    let isCreator = (creator.mail === user.mail) ? true: false;\r\n    if(list) //EDIT\r\n      this.state = {\r\n                    creator, isCreator,\r\n                    list_id: list.list_id, list_name: list.list_name, list_type: list.list_type_id,\r\n                    device_id: list.device.id || '', device_password: list.device.password || '',\r\n                    shares: list.shares, shares_deleted: [], shares_inserted: []\r\n                  };\r\n    else //NEW\r\n      this.state = {creator, isCreator,\r\n                    list_name: '', list_type: 1,\r\n                    device_id: '', device_password: '',\r\n                    shares: [], shares_deleted: [], shares_inserted: []\r\n                  };\r\n\r\n    //console.log(list);\r\n    this.handleChange     =     this.handleChange.bind(this);\r\n    this.submit           =     this.submit.bind(this);\r\n    this.insertShare      =     this.insertShare.bind(this);\r\n    this.removeShare      =     this.removeShare.bind(this);\r\n    this.delete           =     this.delete.bind(this);\r\n  }\r\n  handleChange(e){\r\n    let {name, value} = e.target;\r\n    let stateObj = {}; stateObj[name] = value;\r\n    this.setState(stateObj);\r\n  }\r\n  insertShare(share){\r\n    let shares_inserted       =     [share, ...this.state.shares_inserted];\r\n    let shares                =     [share, ...this.state.shares];\r\n    let {shares_deleted}      =     this.state;\r\n    if(_.find(shares_deleted, {user_id: share.user_id})){ //user was deleted and inserted. remove from both!\r\n      shares_deleted  = _.filter(shares_deleted,  sd => sd.user_id!==share.user_id);\r\n      shares_inserted = _.filter(shares_inserted, si => si.user_id!==share.user_id);\r\n    }\r\n    this.setState({shares, shares_inserted, shares_deleted});\r\n  }\r\n  removeShare(share){\r\n    let shares_deleted         =     [share, ...this.state.shares_deleted]\r\n    let {shares_inserted}      =     this.state;\r\n    let shares                 =     _.filter(this.state.shares, s => s.user_id!==share.user_id)\r\n    if(_.find(shares_inserted, {user_id: share.user_id})){ //user was insrted and deleted. remove from both!\r\n      shares_deleted  = _.filter(shares_deleted,  sd => sd.user_id!==share.user_id);\r\n      shares_inserted = _.filter(shares_inserted, si => si.user_id!==share.user_id);\r\n    }\r\n    this.setState({shares, shares_deleted, shares_inserted});\r\n  }\r\n  submit(e){\r\n    e.preventDefault();\r\n    let {list} = this.props; //check wether edit or new\r\n\r\n    //if(!window.confirm('האם לערוך רשימה זו?')) return false;\r\n    let api = {\r\n      verb: !list ? 'POST'  :  'PUT',\r\n      url:  !list ? '/list' :  `/list/${list.list_id}`\r\n    }\r\n    API_CALL(api.verb, api.url, this.state).then((cb) => {\r\n      this.props.close();\r\n    }).catch((e) => {\r\n      let error = e.response && e.response.data;\r\n      if(error==='device details invalid')\r\n        alert(\"פרטי ההתקן אינם נכונים\");\r\n      else if(error==='device already connected')\r\n        alert(\"ההתקן כבר משוייך לרשימה אחרת\");\r\n    });\r\n  }\r\n  delete(){\r\n    let {isCreator, list_id}   = this.state;\r\n    if(!window.confirm(isCreator ? `האם ברצונך למחוק סופית רשימה זו?` : `האם ברצונך להסיר השתתפותך מרשימה זו?`))\r\n      return false;\r\n    API_CALL('DELETE', `/list/${list_id}`, this.state).then((cb) => {\r\n      this.props.close();\r\n    }).catch((e) => {\r\n      console.log(e.message);\r\n    });\r\n  }\r\n  render(){\r\n    let state = this.state;\r\n    let {list} = this.props;\r\n    let {creator, isCreator} = this.state;\r\n\r\n    return(\r\n      <div className='ModalList'>\r\n        <header className='modal-header'>\r\n          <div className='title'>{list ? this.props.list.list_name : 'רשימה חדשה'}</div>\r\n          {list && <div className='left'><Icon icon=\"trash\" color='#f95d49;' onClick={this.delete}/> </div>}\r\n        </header>\r\n        <form onSubmit={this.submit} onReset={() => this.props.close()}>\r\n          <header>פרטי הרשימה</header>\r\n          <div className='field'>\r\n            <div>שם הרשימה</div>\r\n            <div><input type='text' name='list_name' value={state.list_name} onChange={this.handleChange} placeholder=\"הכנס את שם הרשימה\" required /></div>\r\n          </div>\r\n          <div className='field radio'>\r\n            <RadiosAPI name='list_type' value={state.list_type} onClick={this.handleChange} api={{verb:'GET', url: '/list/types'}} readOnly={!isCreator} />\r\n          </div>\r\n\r\n          <header>חברי הרשימה</header>\r\n          <div className='field'>\r\n            <ListShares shares={state.shares} creator={creator} isCreator={isCreator}\r\n                        onInsert={this.insertShare}  onRemove={this.removeShare}\r\n            />\r\n          </div>\r\n\r\n          <header>פרטי ההתקן</header>\r\n          {isCreator &&\r\n            <div>\r\n              <div className='field'>\r\n                <div>מספר סידורי</div>\r\n                <div><input type='number' name='device_id' value={state.device_id} onChange={this.handleChange} placeholder=\"הזן את מספר ההתקן שברשותך\" readOnly={!isCreator}/></div>\r\n              </div>\r\n              <div className='field'>\r\n                <div>סיסמא</div>\r\n                <div><input type='text' name='device_password' value={state.device_password} onChange={this.handleChange} placeholder=\"הזן את הסיסמא הרשומה על גב ההתקן\" readOnly={!isCreator}/></div>\r\n              </div>\r\n            </div>\r\n          }\r\n          <footer>\r\n            <div className='cancel'><button   type=\"reset\">ביטול</button></div>\r\n            <div className='confirm'><button  type=\"submit\">אישור</button></div>\r\n          </footer>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({user}) => {return {user} };\r\nfunction mapDispatchToProps(dispatch){\r\n  return bindActionCreators({insertList}, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps,mapDispatchToProps)(ModalList);\r\n","import ModalList from './ModalList';\r\nexport default ModalList;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport {connect} from 'react-redux';\r\nimport _ from 'lodash';\r\nimport {withRouter} from 'react-router-dom';\r\nimport Icon from '../../Misc/Icon';\r\nimport EmptyList from './EmptyList';\r\nimport List from './List';\r\nimport MenuToggler  from '../../Misc/MenuToggler';\r\nimport Modal from   '../../Misc/MyModal';\r\nimport ModalList from './ModalList';\r\n\r\nclass Lists extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {isModal: false, editList: null};\r\n    this.toggleIsModal      =     this.toggleIsModal.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    window.addEventListener(\"beforeunload\", (ev) => {\r\n      ev.preventDefault();\r\n      //this.props.history.goForward();\r\n    });\r\n  }\r\n  toggleIsModal(){\r\n    let isModal = !(this.state.isModal);\r\n    this.setState({isModal}, () => {\r\n      if(!isModal)\r\n        this.setState({editList: null});\r\n    });\r\n  }\r\n  renderLists(){\r\n    let {lists} = this.props;\r\n    return _.map(lists, (list) => {\r\n      return <List key={list.list_id} list={list}\r\n                showList={() => this.props.history.push(`/list/${list.list_id}`)}\r\n                editList={() => this.setState({editList: list, isModal: true})}\r\n            />\r\n    })\r\n  }\r\n  renderEmpty(){\r\n    return <EmptyList/>\r\n  }\r\n\r\n  render(){\r\n    let {lists} = this.props;\r\n    return(\r\n      <div className='Page Lists'>\r\n        <Modal isOpen={this.state.isModal} ><ModalList list={this.state.editList} close={this.toggleIsModal} /></Modal>\r\n\r\n        <header>\r\n          <div className='right'><MenuToggler /></div>\r\n          <div className='title'>הרשימות שלי</div>\r\n          <div className='left'><Icon icon='search' size='2x' /></div>\r\n        </header>\r\n        <main className='lists'>\r\n          {_.size(lists)>0   && this.renderLists()}\r\n          {_.size(lists)===0 && this.renderEmpty()}\r\n        </main>\r\n        <footer>\r\n          <button onClick={this.toggleIsModal}><Icon icon=\"plus\" />רשימה חדשה </button>\r\n        </footer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({lists, socket}) => {return {lists, socket} };\r\n\r\nexport default withRouter(connect(mapStateToProps)(Lists));\r\n","import Lists from './Lists';\r\nexport default Lists;\r\n","import ModalProduct from './ModalProduct';\r\nexport default ModalProduct;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport Icon         from  '../../../Misc/Icon';\r\nimport {API_CALL}   from '../../../../consts';\r\n\r\nclass ModalProduct extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    let {product} = this.props;\r\n    if(product)\r\n      this.state = {product_name: product.product_name, quantity: product.quantity, memo: product.memo ? product.memo : ''};\r\n    else\r\n      this.state = {product_name: '', quantity: 1, memo: ''};\r\n\r\n    this.increaseQuantity = this.increaseQuantity.bind(this);\r\n    this.decreaseQuantity = this.decreaseQuantity.bind(this);\r\n    this.handleMemo       = this.handleMemo.bind(this);\r\n    this.delete           = this.delete.bind(this);\r\n    this.update           = this.update.bind(this);\r\n    this.new              = this.new.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    if(this.product_name)\r\n      this.product_name.focus();\r\n  }\r\n  increaseQuantity(){\r\n    let {quantity} = this.state;\r\n    this.setState({quantity: quantity+1});\r\n  }\r\n  decreaseQuantity(){\r\n    let {quantity} = this.state;\r\n    if(quantity===1) return false;\r\n    this.setState({quantity: quantity-1});\r\n  }\r\n  handleMemo(e){\r\n    let {value} = e.target;\r\n    this.setState({memo: value});\r\n  }\r\n  update(e){\r\n    e.preventDefault();\r\n    let product = {...this.props.product, ...this.state};\r\n    let p_route = product.isManual ? 'manual_product' : 'product';\r\n    API_CALL('PUT', `/list/${product.list_id}/${p_route}/${product.id}`, {product}).then((cb) => {\r\n      this.props.close();\r\n    });\r\n  }\r\n  new(e){\r\n    e.preventDefault();\r\n    let product = {...this.state};\r\n    API_CALL('POST', `/list/${this.props.list.list_id}/manual_product`, {product}).then((cb) => {\r\n      this.props.close()\r\n    });\r\n  }\r\n\r\n  delete(){\r\n    if(!window.confirm('האם למחוק מוצר זה?'))\r\n      return false;\r\n    \r\n    let {product} = this.props;\r\n    if(!product.id)\r\n      return false;\r\n\r\n    let p_route = product.isManual ? 'manual_product' : 'product';\r\n    API_CALL('DELETE', `/list/${product.list_id}/${p_route}/${product.id}`, {product_id: product.id}).then((cb) => {\r\n      this.props.close();\r\n    });\r\n  }\r\n  render(){\r\n    let {product} = this.props;\r\n\r\n    return(\r\n      <div className='ModalProduct'>\r\n        <header className='modal-header'>\r\n          <div className='title'>עריכת מוצר</div>\r\n          <div className='left'><Icon icon=\"trash\" color='#f95d49;' onClick={this.delete}/></div>\r\n        </header>\r\n        <form onSubmit={product ? this.update : this.new} onReset={this.props.close}>\r\n          {product && <div className='product_name'>{product.product_name}</div>}\r\n          {!product &&\r\n            <div className='field'>\r\n              <div>שם המוצר</div>\r\n              <div><input type='text' name='product_name' value={this.state.product_name} onChange={(e) => this.setState({product_name: e.target.value})} placeholder=\"לדוגמא: מלפפון\" required ref={(input) => {this.product_name=input}} /></div>\r\n            </div>\r\n          }\r\n          <div className='quantity'>\r\n            <div><Icon icon='plus'  onClick={this.increaseQuantity}/></div>\r\n            <div className='number'>{this.state.quantity}</div>\r\n            <div><Icon icon='minus' onClick={this.decreaseQuantity}/></div>\r\n          </div>\r\n          <div className='memo'>\r\n            <textarea value={this.state.memo} placeholder=\"הערות...\" onChange={this.handleMemo}/>\r\n          </div>\r\n          <footer>\r\n            <div className='cancel'><button   type=\"reset\">ביטול</button></div>\r\n            <div className='confirm'><button  type=\"submit\">אישור</button></div>\r\n          </footer>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ModalProduct;\r\n","import OptionsToggler from './OptionsToggler';\r\nexport default OptionsToggler;\r\n","import React,{Component}  from 'react';\r\nimport './style.scss';\r\nimport Icon               from '../../../Misc/Icon';\r\n\r\nclass OptionsToggler extends Component{\r\n  renderFalse(){\r\n    return(\r\n      <div className='false'>\r\n        <div><button className='expand' onClick={this.props.toggle}><Icon icon=\"ellipsis-v\" /></button></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderTrue(){\r\n    const {isCreator, platform, shoppingMode} = this.props;\r\n    return (\r\n      <div className='true'>\r\n        <div className='expand'><button className='expand' onClick={this.props.toggle}><Icon icon=\"times\" /></button></div>\r\n        {isCreator &&\r\n          <div className='option' onClick={() => {this.props.toggle(); this.props.clearList();}}>\r\n            <div className='icon'><Icon icon='broom' /></div>\r\n            <div className='desc'>ניקוי רשימה</div>\r\n          </div>\r\n        }\r\n        <div className='option' onClick={() => {this.props.toggle(); this.props.bestShoppingCart();}}>\r\n          <div className='desc'>סל הקניות הזול ביותר</div>\r\n          <div className='icon'><Icon icon='shopping-cart' /></div>\r\n        </div>\r\n        <div className='option' onClick={() => {this.props.toggle(); this.props.shareWhatsapp();}}>\r\n          <div className='desc'>שיתוף רשימה</div>\r\n          <div className='icon'><Icon icon='whatsapp' faType='fab' /></div>\r\n        </div>\r\n        {(platform==='ios' || platform==='android') &&\r\n          <div className='option shopping-mode' onClick={() => {this.props.toggleShoppingMode();}}>\r\n            <div className='desc'>מצב סופרמרקט</div>\r\n            <div className='icon'><Icon icon={!shoppingMode ? 'toggle-off' : 'toggle-on'}/></div>\r\n          </div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n  render(){\r\n    let {isExpand} = this.props;\r\n    return(\r\n      <div className={`OptionsToggler ${this.props.className}`}>\r\n        {isExpand ? this.renderTrue() : this.renderFalse()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default OptionsToggler;\r\n","import PlusToggler from './PlusToggler';\r\nexport default PlusToggler;\r\n","import React,{Component}  from 'react';\r\nimport './style.scss';\r\nimport Icon               from '../../../Misc/Icon';\r\n\r\nclass PlusToggler extends Component{\r\n  renderFalse(){\r\n    const {shoppingMode} = this.props;\r\n    return(\r\n      <div className='false'>\r\n        <div><button className='expand' onClick={this.props.toggle}><Icon icon={!shoppingMode ? 'plus' : 'check'} /></button></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderTrue(){\r\n    const {platform} = this.props;\r\n    return (\r\n      <div className='true'>\r\n        <div className='expand'><button className='expand' onClick={this.props.toggle}><Icon icon=\"times\" /></button></div>\r\n        {(platform==='ios' || platform==='android') &&\r\n          <div className='option' onClick={() => {this.props.toggle(); this.props.scanBarcode();}}>\r\n            <div className='icon'><Icon icon='barcode' /></div>\r\n            <div className='desc'>סריקת ברקוד</div>\r\n          </div>\r\n        }\r\n        <div className='option' onClick={() => {this.props.toggle(); this.props.manualProduct();}}>\r\n          <div className='icon'><Icon icon='plus' /></div>\r\n          <div className='desc'>הוספה ידנית</div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n  render(){\r\n    let {isExpand} = this.props;\r\n    return(\r\n      <div className={`PlusToggler ${this.props.className}`}>\r\n        {isExpand ? this.renderTrue() : this.renderFalse()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PlusToggler;\r\n","import Product from './Product';\r\nexport default Product;\r\n","import React,{Component} from 'react';\r\nimport './style.scss';\r\nimport {API_CALL}       from '../../../../consts';\r\nimport Icon             from '../../../Misc/Icon';\r\n\r\nclass Product extends Component{\r\n  toggleCheck(){\r\n    let {list_id, id, isManual} = this.props.product;\r\n    const p_route = isManual ? 'manual_product' : 'product';\r\n    API_CALL('POST', `/list/${list_id}/${p_route}/${id}/toggleCheck`);\r\n  }\r\n  render(){\r\n    let {product} = this.props;\r\n    const Quantity = product.quantity>1 ? <span className='quantity'>({product.quantity})</span> : null;\r\n    return(\r\n      <div className={`Product ${product.isChecked ? 'checked' : null}`}>\r\n        <div className='product' onClick={() => this.toggleCheck()}>\r\n          <div className='name'>{product.product_name}{Quantity}</div>\r\n          <div className='memo'>{product.memo}</div>\r\n        </div>\r\n        <div className='options' onClick={this.props.onEdit}><Icon icon='ellipsis-v' size='1x' /></div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Product;\r\n","import CatGroup from './CatGroup';\r\nexport default CatGroup;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport _ from 'lodash';\r\nimport Product            from '../Product';\r\n\r\nclass CatGroup extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {isExpand: true};\r\n\r\n    this.toggleExpand     =     this.toggleExpand.bind(this);\r\n  }\r\n  toggleExpand(){\r\n    let isExpand = !(this.state.isExpand);\r\n    this.setState({isExpand});\r\n  }\r\n  renderProducts(){\r\n    let products =_.map(this.props.cat, (product) => {\r\n      return <Product key={product.id} product={product} onEdit={() => this.props.setProduct(product)} />\r\n    });\r\n    return products;\r\n  }\r\n  render(){\r\n    let {cat} = this.props;\r\n    if(cat.length===0) return null;\r\n    const cat_name = cat[0].category_name;\r\n    const {isExpand} = this.state;\r\n    let unCheckedProducts = _.filter(cat, (product) => product.isChecked===0).length;\r\n    return(\r\n      <div className='CatGroup'>\r\n        <div className='header' onClick={this.toggleExpand}>\r\n          <div>{isExpand ? '-' : '+'}</div>\r\n          <div>{cat_name}</div>\r\n          <div className='counter'>({unCheckedProducts})</div>\r\n        </div>\r\n        <div className='products'>\r\n          {isExpand && this.renderProducts()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CatGroup;\r\n","import ModifiedAt from './ModifiedAt';\r\nexport default ModifiedAt;\r\n","import React from 'react';\r\nimport './style.scss';\r\nimport moment from 'moment';\r\n\r\nconst getDateStr = (modifiedAt) => {\r\n  let dateDiff = moment().startOf('day').diff(moment(modifiedAt).startOf('day'), 'days');\r\n  if(dateDiff===0)\r\n    return 'היום'\r\n  else if(dateDiff===1)\r\n    return 'אתמול';\r\n\r\n  if(moment(modifiedAt).year() === moment().year())\r\n    return 'בתאריך ' + moment(modifiedAt).format('DD/MM');\r\n  else\r\n    return 'בתאריך ' + moment(modifiedAt).format('DD/MM/YY');\r\n}\r\n\r\nconst ModifiedAt = ({modifiedAt}) => {  \r\n  let dateStr = getDateStr(modifiedAt);\r\n  let timeStr = moment(modifiedAt).format('HH:mm');\r\n  return (\r\n    <div className='ModifiedAt'>\r\n      נערך לאחרונה\r\n      <div className='date'>\r\n        {dateStr}\r\n        ,&nbsp;\r\n        {timeStr}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ModifiedAt;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport _ from 'lodash';\r\nimport {BarcodeScanner} from '@ionic-native/barcode-scanner';\r\nimport {Plugins}        from '@capacitor/core';\r\nimport {API_CALL}       from '../../../consts';\r\nimport {withRouter}     from 'react-router-dom';\r\nimport {connect}        from 'react-redux';\r\nimport Icon             from '../../Misc/Icon';\r\nimport MenuToggler      from '../../Misc/MenuToggler';\r\nimport Modal            from  '../../Misc/MyModal';\r\nimport ModalProduct     from  './ModalProduct';\r\nimport OptionsToggler   from  './OptionsToggler';\r\nimport PlusToggler      from  './PlusToggler';\r\nimport CatGroup         from  './CatGroup';\r\nimport ModifiedAt       from  './ModifiedAt';\r\n\r\nclass ViewList extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {product: null, isManual: false, isOptions: false, isPlus: false, platform: '', shoppingMode: false};\r\n    this.barcodeScanner = BarcodeScanner;\r\n\r\n    this.checkListID        =     this.checkListID.bind(this);\r\n    this.setPlatform        =     this.setPlatform.bind(this);\r\n    this.toggleIsManual     =     this.toggleIsManual.bind(this);\r\n    this.toggleIsOptions    =     this.toggleIsOptions.bind(this);\r\n    this.toggleIsPlus       =     this.toggleIsPlus.bind(this);\r\n    this.toggleShoppingMode =     this.toggleShoppingMode.bind(this);\r\n    this.setProduct         =     this.setProduct.bind(this);\r\n    this.shareWhatsapp      =     this.shareWhatsapp.bind(this);\r\n    this.clearList          =     this.clearList.bind(this);\r\n    this.goBestShoppingCart =     this.goBestShoppingCart.bind(this);\r\n    this.scanBarcode        =     this.scanBarcode.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    this.setPlatform();\r\n    setTimeout(this.checkListID, 1000);\r\n  }\r\n  async checkListID(){\r\n      let {list} = this.props;\r\n      if(!list)\r\n        this.props.history.push('/');\r\n  }\r\n  async setPlatform(){\r\n    const deviceInfo = await Plugins.Device.getInfo();\r\n    this.setState({platform: deviceInfo.platform});\r\n  }\r\n  toggleIsManual(){\r\n    let isManual = !(this.state.isManual);\r\n    this.setState({isManual});\r\n  }\r\n  toggleIsOptions(){\r\n    let isOptions = !(this.state.isOptions);\r\n    this.setState({isOptions});\r\n  }\r\n  toggleIsPlus(){\r\n    let isPlus = !(this.state.isPlus);\r\n    this.setState({isPlus});\r\n  }\r\n  toggleShoppingMode(){\r\n    let shoppingMode = !(this.state.shoppingMode);\r\n    this.setState({shoppingMode});\r\n  }\r\n  setProduct(product){\r\n    this.setState({product});\r\n  }\r\n  renderCatGroups(){\r\n    let {list}  =   this.props;\r\n    let cats  =   _.groupBy(list.products, 'category_id');\r\n    cats.manual = _.toArray(list.manual_products);\r\n    let Cats = _.map(cats, (cat,i) => {\r\n      return <CatGroup key={i} cat={cat} setProduct={this.setProduct}/>\r\n    })\r\n    return Cats;\r\n  }\r\n  shareWhatsapp(){\r\n    let text = '';\r\n    let {list}  =  this.props;\r\n\r\n    const arr = [..._.toArray(list.products), ..._.toArray(list.manual_products)];\r\n\r\n    text += `*הרשימה ${list.list_name} שותפה ממערכת גולו:* \\n\\n`\r\n    _.map(arr, (p) => {\r\n      if(p.isChecked) return false;\r\n      text += `${p.product_name}`;\r\n      if(p.quantity>1)\r\n        text += ` (${p.quantity})`;\r\n      text += '\\n';\r\n    });\r\n    window.open(`https://wa.me/?text=${encodeURI(text)}`);\r\n  }\r\n  clearList(){\r\n    var j = window.confirm(\"האם לנקות את תוכן הרשימה?\");\r\n    if(j===false) return false;\r\n    let {list}  =  this.props;\r\n    API_CALL('POST', `/list/${list.list_id}/clear`);\r\n  }\r\n  goBestShoppingCart(){\r\n    let {list} = this.props;\r\n    let path = `/list/${list.list_id}/bestShoppingCart`;\r\n    this.props.history.push(path);\r\n  }\r\n  async scanBarcode(){\r\n    let {platform, shoppingMode} = this.state;\r\n    if(platform!=='android' && platform!=='ios')\r\n      return false;\r\n\r\n    let {list: {list_id}} = this.props;\r\n    this.barcodeScanner.scan().then(async barcode => {\r\n      if(barcode.cancelled)\r\n        return false;\r\n      await API_CALL('POST', `/device/scanByMobile/${list_id}/${barcode.text}`, {shoppingMode});\r\n\r\n      if(this.state.shoppingMode)\r\n        this.scanBarcode(); //infinite scan in shoppingMode-> till user go back\r\n    }).catch(err => console.log(\"Error\", err));\r\n  }\r\n  render(){\r\n    const {list,user} = this.props;\r\n    if(!list) return null;\r\n\r\n    const {product, isManual, isOptions, isPlus, platform, shoppingMode} = this.state;\r\n    const isCreator = list.creator.mail===user.mail ? true : false;\r\n    return(\r\n      <div className='Page ViewList'>\r\n        {(isOptions || isPlus) && <div className='overlay' onClick={() => this.setState({isOptions: false, isPlus: false})}></div>}\r\n        <Modal isOpen={product ? true : false} close={() => this.setProduct(null)}>\r\n          <ModalProduct product={product} close={() => this.setProduct(null)} />\r\n        </Modal>\r\n        <Modal isOpen={isManual} close={() => this.toggleIsManual()}>\r\n          <ModalProduct product={null} list={list} close={() => this.toggleIsManual()} />\r\n        </Modal>\r\n\r\n        <header>\r\n          <div className='right'><MenuToggler /></div>\r\n          <div className='title'>\r\n            {list.list_name}\r\n          </div>\r\n          <div className='left'><Icon icon='arrow-left' size='2x' onClick={() => this.props.history.goBack()} /></div>\r\n        </header>\r\n        <main className='list-products'>\r\n          {this.renderCatGroups()}\r\n        </main>\r\n        <footer className={(isPlus || isOptions) ? 'no-border' : ''}>\r\n          <OptionsToggler className={isPlus && 'hidden'}\r\n              isExpand={isOptions} toggle={this.toggleIsOptions} isCreator={isCreator} platform={platform}\r\n              shareWhatsapp={this.shareWhatsapp} clearList={this.clearList} bestShoppingCart={this.goBestShoppingCart}\r\n              toggleShoppingMode={this.toggleShoppingMode} shoppingMode={shoppingMode}\r\n          />\r\n          {(!isPlus && !isOptions) &&\r\n            <ModifiedAt modifiedAt={list.modified_at} />\r\n          }\r\n          <PlusToggler className={isOptions && 'hidden'}\r\n              isExpand={isPlus} toggle={this.toggleIsPlus}    isCreator={isCreator} platform={platform}\r\n              manualProduct={this.toggleIsManual} scanBarcode={this.scanBarcode}\r\n              shoppingMode={shoppingMode}\r\n          />\r\n        </footer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({lists, user}, ownProps) => {return {user, list: lists[ownProps.match.params.list_id]}};\r\nexport default withRouter(connect(mapStateToProps)(ViewList));\r\n","import ViewList from './ViewList';\r\nexport default ViewList;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport moment         from 'moment';\r\nimport {withRouter}   from 'react-router-dom';\r\n\r\nclass Notification extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.viewNotification = this.viewNotification.bind(this);\r\n  }\r\n  viewNotification(){\r\n    let {notification_id} = this.props.noti;\r\n    this.props.history.push(`/notifications/${notification_id}`);\r\n  }\r\n\r\n  render(){\r\n      let {noti} = this.props;\r\n      let isToday = moment(noti.modifiedAt).isSame(moment(), 'date');\r\n      return(\r\n        <div className={`Notification ${!noti.isRead && 'unRead'}`} onClick={this.viewNotification}>\r\n          <div className='title'>\r\n            <div className='primary'>{noti.title.primary}</div>\r\n            <div className='secondary'>{noti.title.secondary}</div>\r\n          </div>\r\n          <div className='at'>\r\n            <div className='time'>{moment(noti.modifiedAt).format('HH:mm')}</div>\r\n            {!isToday && <div className='date'>{moment(noti.modifiedAt).format('DD/MM/YY')}</div>}\r\n          </div>\r\n        </div>\r\n      );\r\n  }\r\n}\r\n\r\nexport default withRouter(Notification);\r\n","import Notification from './Notification';\r\nexport default Notification;\r\n","import EmptyNotifications from './EmptyNotifications';\r\nexport default EmptyNotifications;\r\n","import React from 'react';\r\nimport './style.scss';\r\nimport Icon from '../../../Misc/Icon';\r\n\r\nconst EmptyNotifications = () => {\r\n  return(\r\n    <div className='EmptyNotifications'>\r\n      <div className=\"icon\"><Icon icon=\"file\" faType=\"far\"/></div>\r\n      <div className='primary'>רשימת ההתראות ריקה</div>      \r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EmptyNotifications;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport _ from 'lodash';\r\nimport {connect}            from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport {markUnNew}    from '../../../actions/notification';\r\n\r\nimport MenuToggler  from '../../Misc/MenuToggler';\r\nimport Icon from '../../Misc/Icon';\r\nimport Notification from './Notification';\r\nimport EmptyNotifications from './EmptyNotifications';\r\n\r\nclass Notifications extends Component{\r\n  componentDidMount(){\r\n    const newCounter    = _.filter(this.props.notifications, (noti) => noti.isNew===1).length;\r\n    if(newCounter>0)\r\n      this.props.markUnNew();\r\n  }\r\n  renderNotifications(){\r\n    let arr = _.values(this.props.notifications);\r\n    if(arr.length===0)\r\n      return <EmptyNotifications />;\r\n\r\n    let Notifications = _.map(arr.reverse(), (noti, i) => {\r\n      return <Notification key={i} noti={noti} />\r\n    })\r\n    return Notifications;\r\n  }\r\n  render(){\r\n    return(\r\n      <div className='Page Notifications'>\r\n        <header>\r\n          <div className='right'><MenuToggler /></div>\r\n          <div className='title'>התראות</div>\r\n          <div className='left'><Icon icon='arrow-left' size='2x' onClick={() => this.props.history.goBack()} /></div>\r\n        </header>\r\n        <main className='list-notifications'>\r\n          {this.renderNotifications()}\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({notifications}) => {return {notifications}};\r\nfunction mapDispatchToProps(dispatch){\r\n  return bindActionCreators({markUnNew}, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Notifications);\r\n","import Notifications from './Notifications';\r\nexport default Notifications;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport {connect}              from 'react-redux';\r\nimport {bindActionCreators}   from 'redux';\r\nimport {confirmNotification}  from '../../../../actions/notification';\r\nimport moment from 'moment';\r\nimport Icon from '../../../Misc/Icon';\r\n\r\nclass SharedList extends Component{\r\n  isConfirmation(){\r\n    let {noti} = this.props;\r\n    if(noti.isConfirm===0)\r\n      return null;\r\n    return (<footer className='confirmation'>\r\n              <button onClick={() => this.props.confirmNotification(noti.notification_id)}>אישור</button>\r\n            </footer>\r\n    );\r\n  }\r\n  render(){\r\n    let {noti} = this.props;\r\n    let {status} = noti;\r\n    if(!noti) return null;\r\n    let isToday = moment(noti.createdAt).isSame(moment(), 'date');\r\n    let icon;\r\n    if(status===1) //wait for confirmation\r\n      icon = 'share-alt'\r\n    else if(status===2 || status===3) //user removed from list\r\n      icon = 'user-times';\r\n    else if(status===4 || status===10) //user joined group\r\n      icon = 'handshake';\r\n    return(\r\n      <div className='SharedList'>\r\n        <main>\r\n          <div className='title'>\r\n            <div className='topic'>\r\n                {noti.title.primary}\r\n                <div className='secondary'>\r\n                  {noti.title.secondary}\r\n                </div>\r\n            </div>\r\n            <div className='at'>\r\n              <div className='time'>{moment(noti.createdAt).format('HH:mm')}</div>\r\n              {!isToday && <div className='date'>{moment(noti.createdAt).format('DD/MM/YY')}</div>}\r\n            </div>\r\n          </div>\r\n          <div className='img'>\r\n            <Icon icon={icon}/>\r\n          </div>\r\n          <div className='question'>\r\n            {noti.title.secondary}\r\n          </div>\r\n        </main>\r\n        {this.isConfirmation()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch){\r\n  return bindActionCreators({confirmNotification}, dispatch);\r\n}\r\n\r\nexport default connect(null,mapDispatchToProps)(SharedList);\r\n","import SharedList from './SharedList';\r\nexport default SharedList;\r\n","import DataListAPI from './DataListAPI';\r\nexport default DataListAPI;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport {API_CALL} from '../../../consts';\r\nimport _ from 'lodash';\r\n\r\nclass DataListAPI extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {data: [], isSelected: false};\r\n\r\n    this.handleChange   =   this.handleChange.bind(this);\r\n    this.fetchAPI       =   this.fetchAPI.bind(this);\r\n    this.renderOptions  =   this.renderOptions.bind(this);\r\n    this.optionSelected =   this.optionSelected.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    this.fetchAPI();\r\n  }\r\n  fetchAPI(){\r\n    let {api} = this.props;\r\n    if(!api) return false;\r\n    API_CALL(api.verb, api.url).then((data) => {\r\n      this.setState({data});\r\n    }).catch((e) => {\r\n      setTimeout(this.fetchAPI, 1000);\r\n    });\r\n  }\r\n  renderOptions(){\r\n    let {value} = this.props;\r\n    if(value.length < 2 || this.state.isSelected)\r\n      return false;\r\n\r\n    let Options = _.map(this.state.data, (opt) => {\r\n      if(opt.name.includes(value))\r\n        return  <div  className={`option ${(/^[a-zA-Z]+$/).test(opt.name) && 'english'}`} key={opt.id}\r\n                      onClick={() => this.optionSelected(opt)}>\r\n                  {opt.name}\r\n                </div>\r\n    })\r\n    return Options;\r\n  }\r\n  optionSelected(opt){\r\n    let e = {};\r\n    e.target = {\r\n      name:   this.props.name,\r\n      value:  opt.name\r\n    }\r\n    this.setState({isSelected: true});\r\n    this.props.onChange(e);\r\n    this.props.onSelect(opt.id); //trigger onSelect only if dataList MATCH option\r\n  }\r\n  handleChange(e){\r\n    this.setState({isSelected: false});\r\n    let {value} = e.target;\r\n    this.props.onChange(e);\r\n    let opt = _.find(this.state.data, {name: value});\r\n    this.props.onSelect(opt ? opt.id : 0); //trigger onSelect only if dataList MATCH option\r\n  }\r\n  render(){\r\n    let {value, name, placeholder} = this.props;\r\n    let {data} = this.state;\r\n    if(data.length===0) return null;\r\n    return(\r\n      <div className='DataListAPI'>\r\n        <input type='text' name={name} value={value} onChange={this.handleChange} placeholder={placeholder} required />\r\n        <div className='options'>\r\n          {this.renderOptions()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DataListAPI;\r\n","import SelectAPI from './SelectAPI';\r\nexport default SelectAPI;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport {API_CALL} from '../../../consts';\r\nimport _ from 'lodash';\r\n\r\nclass SelectAPI extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {data: []};\r\n\r\n    this.fetchAPI = this.fetchAPI.bind(this);\r\n    this.renderOptions = this.renderOptions.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    this.fetchAPI();\r\n  }\r\n  fetchAPI(){\r\n    let {api} = this.props;\r\n    if(!api) return false;\r\n    API_CALL(api.verb, api.url).then((data) => {\r\n      this.setState({data});\r\n    }).catch((e) => {\r\n      setTimeout(this.fetchAPI, 1000);\r\n    });\r\n  }\r\n  renderOptions(){\r\n    let Options = _.map(this.state.data, (opt) => {\r\n      return <option key={opt.id} value={opt.id}>{opt.name}</option>\r\n    })\r\n    return Options;\r\n  }\r\n  render(){\r\n    let {value, name} = this.props;\r\n    return(\r\n      <select className={`SelectAPI ${!value && 'disabled'}`} value={value} name={name}\r\n              onChange={this.props.onChange} required={this.props.required}>\r\n        <option value=\"\" disabled>{this.props.placeholder}</option>;\r\n        {this.renderOptions()}\r\n      </select>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SelectAPI;\r\n","import ModalBarcode from './ModalBarcode';\r\nexport default ModalBarcode;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport DataListAPI from '../../../Misc/DataListAPI';\r\nimport SelectAPI from '../../../Misc/SelectAPI';\r\n\r\nclass ModalBarcode extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    const product = this.props.noti.product;\r\n\r\n    this.state = {\r\n      barcode: this.props.barcode,\r\n      product_name:     product ? product.product_name.split(' -')[0]  : '',\r\n      category_id:      product ? product.category_id       : '',\r\n      capacity_unit_id: product ? product.capacity_unit_id  : '',\r\n      capacity:         product ? product.capacity          : '',\r\n      brand_id:         product ? product.brand_id          : '',\r\n      brand_text:       product ? product.brand_name        : ''\r\n    }\r\n    this.handleChange     =     this.handleChange.bind(this);\r\n    this.submit           =     this.submit.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    this.product_name.focus();\r\n  }\r\n  handleChange(e){\r\n    let {name, value} = e.target;    \r\n    let stateObj = {}; stateObj[name] = value;\r\n    this.setState(stateObj);\r\n  }\r\n  submit(e){\r\n    e.preventDefault();\r\n    this.props.onSubmit(this.state);\r\n  }\r\n  render(){\r\n    let {state} = this;\r\n    let {product} = this.props.noti;\r\n    return(\r\n      <div className='ModalBarcode'>\r\n        <header className='modal-header'>\r\n          <div className='title'>{product ? 'עריכת מוצר' : 'מוצר חדש'}</div>\r\n        </header>\r\n        <form onSubmit={this.submit} onReset={() => this.props.close()}>\r\n          <header>פרטי המוצר</header>\r\n            <div className='field'>\r\n              <div>ברקוד</div>\r\n              <div><input type='text' name='barcode' value={state.barcode} onChange={this.handleChange} required readOnly /></div>\r\n            </div>\r\n          <div className='field'>\r\n            <div>שם המוצר</div>\r\n            <div><input type='text' name='product_name' value={state.product_name} onChange={this.handleChange} placeholder=\"לדוגמא: סבון כלים\" required ref={(input) => {this.product_name=input}} /></div>\r\n          </div>\r\n          <header>פרטים נוספים</header>\r\n          <div className='field row'>\r\n            <div>חברה</div>\r\n            <div>\r\n              <DataListAPI api={{verb:'GET', url: '/db/brands'}} placeholder='לדוגמא: פיירי' required\r\n                  name='brand_text' value={state.brand_text} onChange={this.handleChange}\r\n                  onSelect={(val) => this.setState({brand_id: val})}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className='field row'>\r\n            <div>קטגוריה</div>\r\n            <div>\r\n              <SelectAPI api={{verb:'GET', url: '/db/categories'}} placeholder='יש לבחור קטגוריה' required\r\n                  name='category_id' value={state.category_id} onChange={this.handleChange}\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className='field row'>\r\n            <div>כמות</div>\r\n            <div className='multiple'>\r\n              <div><input type='number' name='capacity' value={state.capacity} onChange={this.handleChange} placeholder='650' required /></div>\r\n              <div>\r\n                <SelectAPI api={{verb:'GET', url: '/db/capacity_units'}} placeholder='יחידה' required\r\n                    name='capacity_unit_id' value={state.capacity_unit_id} onChange={this.handleChange}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <footer>\r\n            <div className='cancel'><button   type=\"reset\">ביטול</button></div>\r\n            <div className='confirm'><button  type=\"submit\">אישור</button></div>\r\n          </footer>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ModalBarcode;\r\n","import ScanNotExists from './ScanNotExists';\r\nexport default ScanNotExists;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport moment from 'moment';\r\nimport Icon from '../../../Misc/Icon';\r\nimport Modal from   '../../../Misc/MyModal';\r\nimport ModalBarcode from '../ModalBarcode';\r\nimport {API_CALL} from '../../../../consts';\r\n\r\nclass ScanNotExists extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {isModal: false}\r\n\r\n    this.toggleIsModal  =   this.toggleIsModal.bind(this);\r\n    this.submit         =   this.submit.bind(this);\r\n  }\r\n  toggleIsModal(){\r\n    let isModal = !(this.state.isModal);\r\n    this.setState({isModal});\r\n  }\r\n  submit(newProduct){\r\n    const {notification_id} = this.props.noti;\r\n    API_CALL('POST', `/notification/${notification_id}/newProductForm`, {newProduct}).then((cb) => {\r\n      this.toggleIsModal();\r\n    });\r\n  }\r\n  render(){\r\n    let {noti}    =   this.props;\r\n    let {status}  =   noti;\r\n    if(!noti) return null;\r\n    let barcode = noti.subject_id;\r\n    let isToday = moment(noti.createdAt).isSame(moment(), 'date');\r\n    return(\r\n      <div className='ScanNotExists'>\r\n        <Modal isOpen={this.state.isModal} >\r\n          <ModalBarcode close={this.toggleIsModal} barcode={noti.subject_id} noti={noti} onSubmit={this.submit} />\r\n        </Modal>\r\n        <main>\r\n          <div className='title'>\r\n            <div className='topic'>\r\n                מוצר נסרק ואינו זוהה\r\n                <div className='barcode'>\r\n                  ברקוד: {barcode}\r\n                  {status===10 &&\r\n                    <div>\r\n                      פרטי המוצר נשלחו בהצלחה\r\n                    </div>\r\n                  }\r\n                </div>\r\n            </div>\r\n            <div className='at'>\r\n              <div className='time'>{moment(noti.createdAt).format('HH:mm')}</div>\r\n              {!isToday && <div className='date'>{moment(noti.createdAt).format('DD/MM/YY')}</div>}\r\n            </div>\r\n          </div>\r\n          <div className='img'>\r\n            <Icon icon='barcode'/>\r\n          </div>\r\n          <div className='question'>\r\n            {status===1 &&\r\n              <div>\r\n                האם ברצונך לתרום לקהילת גולו\r\n                <br/>\r\n                ולהוסיף את פרטי המוצר?\r\n              </div>\r\n            }\r\n            {status===10 &&\r\n              <div>\r\n                <div className='primary'>פרטי המוצר נשלחו בהצלחה</div>\r\n                <br/><br/>\r\n                תודה רבה על תרומתך למערכת Gulo\r\n              </div>\r\n            }\r\n          </div>\r\n        </main>\r\n        {status===1 &&\r\n           <footer>\r\n             <button onClick={this.toggleIsModal}>הוסף מוצר למאגר</button>\r\n           </footer>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ScanNotExists;\r\n","import VerifyProduct from './VerifyProduct';\r\nexport default VerifyProduct;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport moment from 'moment';\r\nimport Icon from '../../../Misc/Icon';\r\nimport Modal from   '../../../Misc/MyModal';\r\nimport ModalBarcode from '../ModalBarcode';\r\nimport {API_CALL} from '../../../../consts';\r\n\r\nclass VerifyProduct extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {isModal: false}\r\n    this.toggleIsModal        = this.toggleIsModal.bind(this);\r\n    this.renderVerifyQuestion = this.renderVerifyQuestion.bind(this);\r\n    this.renderVerified       = this.renderVerified.bind(this);\r\n    this.renderOverwrited     = this.renderOverwrited.bind(this);\r\n\r\n    this.overwrite            = this.overwrite.bind(this);\r\n    this.verify               = this.verify.bind(this);\r\n  }\r\n  toggleIsModal(){\r\n    let isModal = !(this.state.isModal);\r\n    this.setState({isModal});\r\n  }\r\n  verify(){\r\n    const {notification_id, product} = this.props.noti;\r\n    API_CALL('POST', `/notification/${notification_id}/verifyProduct`, {product}).then((cb) => {\r\n      //console.log(cb);\r\n    });\r\n  }\r\n  overwrite(product){\r\n    const {notification_id} = this.props.noti;\r\n    API_CALL('POST', `/notification/${notification_id}/overwriteProduct`, {product}).then((cb) => {\r\n      this.toggleIsModal();\r\n    });\r\n  }\r\n  renderVerifyQuestion(){\r\n    let {noti} = this.props;\r\n    //console.log(noti);\r\n    return(\r\n      <div className='VerifyQuestion'>\r\n        <div className='product-details'>\r\n           <div className='product-name'>{noti.product.product_name}</div>\r\n           <div>\r\n             <div>מחלקה:</div>\r\n             <div>{noti.product.category_name}</div>\r\n           </div>\r\n           <div>\r\n             <div>מותג:</div>\r\n             <div>{noti.product.brand_name}</div>\r\n           </div>\r\n           <div>\r\n             <div>כמות:</div>\r\n             <div>{noti.product.capacity} {noti.product.unit_name}</div>\r\n           </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  renderOverwrited(){\r\n    let {noti} = this.props;\r\n    let {product} = noti;\r\n    return(\r\n      <div className='Overwrited'>\r\n        <div className='product-name'>{product.barcode} - {product.product_name}</div>\r\n        <div className='desc'>נערך בהצלחה</div>\r\n        <div className='thanks'>תודה רבה על תרומתך למערכת Gulo</div>\r\n      </div>\r\n    );\r\n  }\r\n  renderVerified(){\r\n    let {noti} = this.props;\r\n    let {product} = noti;\r\n    return(\r\n      <main className='Verified'>\r\n        <div className='product-name'>{product.barcode} - {product.product_name}</div>\r\n        <div className='desc'>אימות התקבל</div>\r\n        <div className='thanks'>תודה רבה על תרומתך למערכת Gulo</div>\r\n      </main>\r\n    );\r\n  }\r\n  render(){\r\n    let {noti}    =   this.props;\r\n    let {status}  =   noti;\r\n    if(!noti) return null;\r\n    let barcode = noti.subject_id;\r\n    let isToday = moment(noti.createdAt).isSame(moment(), 'date');\r\n    return(\r\n      <div className='VerifyProduct'>\r\n        <Modal isOpen={this.state.isModal} >\r\n          <ModalBarcode close={this.toggleIsModal} barcode={noti.subject_id} noti={noti} onSubmit={this.overwrite} />\r\n        </Modal>\r\n        <main>\r\n          <div className='title'>\r\n            <div className='topic'>\r\n                מוצר נסרק ואינו זוהה\r\n                <div className='barcode'>\r\n                  ברקוד: {barcode}\r\n                  {status===1   &&  <div>ממתין לאימות</div>}\r\n                  {status===10  && <div>המוצר אומת</div>}\r\n                  {status===100 && <div>המוצר נערך מחדש</div>}\r\n                </div>\r\n            </div>\r\n            <div className='at'>\r\n              <div className='time'>{moment(noti.createdAt).format('HH:mm')}</div>\r\n              {!isToday && <div className='date'>{moment(noti.createdAt).format('DD/MM/YY')}</div>}\r\n            </div>\r\n          </div>\r\n          <div className={`img ${(status===1 || status===10) && 'smaller'}`}>\r\n            <Icon icon='barcode'/>\r\n          </div>\r\n          <div className='memo'>\r\n            {status===1   && this.renderVerifyQuestion()}\r\n            {status===10  && this.renderVerified()}\r\n            {status===100 && this.renderOverwrited()}\r\n          </div>\r\n        </main>\r\n        {status===1 && <footer>\r\n          <button onClick={this.verify}>אימות מוצר</button>\r\n          <button className='secondary' onClick={this.toggleIsModal}>עריכה</button>\r\n        </footer>}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default VerifyProduct;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport {withRouter, Redirect}     from 'react-router-dom';\r\nimport {connect}        from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport {markRead, deleteNotification}           from '../../../actions/notification';\r\n\r\nimport Icon             from '../../Misc/Icon';\r\n//import MenuToggler      from '../../Misc/MenuToggler';\r\nimport SharedList       from './SharedList';\r\nimport ScanNotExists    from './ScanNotExists';\r\nimport VerifyProduct    from './VerifyProduct';\r\n\r\nclass ViewNotification extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.renderNotification = this.renderNotification.bind(this);\r\n    this.deleteNotification = this.deleteNotification.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    let {noti} = this.props;\r\n    if(!noti) return <Redirect to='/notifications' />;\r\n    if(noti.isRead===0)\r\n      this.props.markRead(this.props.noti.notification_id);\r\n  }\r\n  renderNotification(){\r\n    let {noti} = this.props;\r\n    let type = noti.notification_type_id;\r\n    switch(type){\r\n      case 1:\r\n        return <SharedList noti={noti} />\r\n      case 3:\r\n        return <ScanNotExists noti={noti} />\r\n      case 4:\r\n        return <VerifyProduct noti={noti} />\r\n      default:\r\n        return null;\r\n    }\r\n  }\r\n  deleteNotification(){\r\n    let {noti} = this.props;\r\n    this.props.deleteNotification(noti.notification_id);\r\n    this.props.history.goBack();\r\n  }\r\n  render(){\r\n    let {noti} = this.props;    \r\n    // if(!noti) return <Redirect to='/notifications' />;\r\n    if(!noti) return null;\r\n    return(\r\n      <div className='Page ViewNotification'>\r\n        <header>\r\n          <div className='right'><Icon className='trash' icon='trash' hoverColor='red' onClick={this.deleteNotification} /></div>\r\n          <div className='title'>{noti.topic}</div>\r\n          <div className='left'><Icon icon='arrow-left' size='2x' onClick={() => this.props.history.goBack()} /></div>\r\n        </header>\r\n\r\n        {this.renderNotification()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({notifications}, ownProps) => {return {noti: notifications[ownProps.match.params.notification_id]}};\r\nfunction mapDispatchToProps(dispatch){\r\n  return bindActionCreators({markRead, deleteNotification}, dispatch);\r\n}\r\n\r\nexport default withRouter(connect(mapStateToProps,mapDispatchToProps)(ViewNotification));\r\n","import ViewNotification from './ViewNotification';\r\nexport default ViewNotification;\r\n","import ShoppingCart from './ShoppingCart';\r\nexport default ShoppingCart;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport _ from 'lodash';\r\nclass ShoppingCart extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {isExpand: false};\r\n\r\n    this.toggleExpand   =     this.toggleExpand.bind(this);\r\n  }\r\n  toggleExpand(){\r\n    let isExpand = !(this.state.isExpand);\r\n    this.setState({isExpand});\r\n  }\r\n  renderExpand(){\r\n    let {cart, products} = this.props;\r\n    let missing_products = _.differenceBy(products, cart.products, 'barcode');\r\n\r\n    return (\r\n      <div className='expand'>\r\n        {_.map(cart.products, (p) => {\r\n          return (\r\n            <div key={p.barcode} className='row'>\r\n              <div>{p.product_name}</div>\r\n              <div>{p.price}</div>\r\n            </div>\r\n          );\r\n        })}\r\n        <div className='missing-products'>\r\n          {_.map(missing_products, (p) => {\r\n            return (\r\n              <div key={p.barcode} className='row'>\r\n                <div>{p.product_name}</div>\r\n                <div>-</div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n        <div className='total'>\r\n          <div className='row'>\r\n            <div>סה\"כ</div>\r\n            <div>₪{cart.total_price}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  render(){\r\n    let {cart, products} =  this.props;\r\n    let {isExpand}       =  this.state;\r\n    if(!cart) return null;\r\n    let missing_products = _.differenceBy(products, cart.products, 'barcode');\r\n\r\n    return(\r\n      <div className='ShoppingCart' onClick={this.toggleExpand}>\r\n        <div className='logo'>\r\n          <img src={cart.firm_logo} alt='' />\r\n        </div>\r\n        <main>\r\n          <div className='row'>\r\n            <div>עלות:</div>\r\n            <div>{cart.total_price} ₪</div>\r\n          </div>\r\n          {missing_products.length>0 &&\r\n            <div className='row'>\r\n              <div>מספר חוסרים: </div>\r\n              <div>{missing_products.length}</div>\r\n            </div>\r\n          }\r\n          {isExpand && this.renderExpand()}\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ShoppingCart;\r\n","import React, {Component} from 'react';\r\nimport './style.scss';\r\nimport _ from 'lodash';\r\nimport {API_CALL}       from '../../../consts';\r\nimport {connect}        from 'react-redux';\r\nimport Icon             from '../../Misc/Icon';\r\nimport MenuToggler      from '../../Misc/MenuToggler';\r\nimport ShoppingCart     from './ShoppingCart';\r\n\r\n\r\nclass BestShoppingCart extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {carts: []};\r\n    this.fetchCarts = this.fetchCarts.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    this.fetchCarts();\r\n  }\r\n  async fetchCarts(){\r\n    let {list} = this.props;\r\n    if(!list){\r\n      setTimeout(this.fetchCarts, 300);\r\n      return false;\r\n    }\r\n    let carts = await API_CALL('GET', `/list/${list.list_id}/bestShoppingCart`);\r\n    this.setState({carts});\r\n  }\r\n  renderShoppingCarts(){\r\n    let {carts} = this.state;\r\n    carts = _.sortBy(carts, ['total_price'], 'asc');    \r\n    carts = _.orderBy(carts, (cart) => cart.products.length, 'desc');\r\n    return _.map(carts, (cart) => {\r\n      return <ShoppingCart key={cart.shopping_cart_firm_id} cart={cart}\r\n                products={_.toArray(this.props.list.products)}\r\n             />\r\n    })\r\n  }\r\n  render(){\r\n    let {list}  = this.props;\r\n    if(!list) return null;\r\n\r\n    return(\r\n      <div className='Page BestShoppingCart'>\r\n        <header>\r\n          <div className='right'><MenuToggler /></div>\r\n          <div className='title'>\r\n            <div className='primary'>סל הקניות הזול ביותר</div>\r\n            <div className='secondary'>{list.list_name}</div>\r\n          </div>\r\n          <div className='left'><Icon icon='arrow-left' size='2x' onClick={() => this.props.history.goBack()} /></div>\r\n        </header>\r\n        <main className='cart-list'>\r\n          {this.renderShoppingCarts()}\r\n        </main>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({lists}, ownProps) => {return {list: lists[ownProps.match.params.list_id]}};\r\nexport default connect(mapStateToProps)(BestShoppingCart);\r\n","import BestShoppingCart from './BestShoppingCart';\r\nexport default BestShoppingCart;\r\n","import React, {Component}   from 'react';\r\nimport './style.scss';\r\nimport '../../FontAwesomeLib';\r\nimport SocketListener from './SocketListener';\r\n\r\nimport {Route, Switch}                  from  'react-router-dom';\r\nimport {connect}                        from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport {fetchLists}         from '../../actions/list';\r\nimport {fetchNotifications} from '../../actions/notification';\r\n\r\nimport VerifyAuth   from '../VerifyAuth';\r\nimport SideMenu     from  './SideMenu';\r\nimport Lists        from  './Lists';\r\nimport ViewList     from  './ViewList';\r\n\r\nimport Notifications    from './Notifications';\r\nimport ViewNotification from './ViewNotification';\r\nimport BestShoppingCart from './BestShoppingCart';\r\n\r\nclass Gulo extends Component{\r\n  constructor(props){\r\n    super(props);\r\n    this.fetchData = this.fetchData.bind(this);\r\n  }\r\n  componentDidMount(){\r\n    this.fetchData();\r\n  }\r\n  componentDidUpdate(prevProps){\r\n    if(!prevProps.user && this.props.user)\r\n      this.fetchData();\r\n  }\r\n  fetchData(){\r\n    if(!this.props.user) return false;\r\n    this.props.fetchLists();\r\n    this.props.fetchNotifications();\r\n  }\r\n  render(){\r\n    const {user} = this.props;\r\n    return(\r\n      <>\r\n        <VerifyAuth/>\r\n        {user &&\r\n          <div className='Gulo'>\r\n            <SocketListener />\r\n            <SideMenu />\r\n            <Switch>\r\n              <Route path='/list/:list_id/bestShoppingCart' component={BestShoppingCart}/>\r\n              <Route path='/list/:list_id' component={ViewList}/>\r\n              <Route path='/notifications/:notification_id' component={ViewNotification}/>\r\n              <Route path='/notifications' component={Notifications}/>\r\n              <Route path='/' component={Lists}/>\r\n            </Switch>\r\n          </div>\r\n        }\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({user}) => {return {user} };\r\nfunction mapDispatchToProps(dispatch){\r\n  return bindActionCreators({fetchLists, fetchNotifications}, dispatch);\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Gulo);\r\n","import Gulo from './Gulo';\r\nexport default Gulo;\r\n","const firebaseConfig = {\r\n  apiKey: \"AIzaSyAOiEAnra5CXPSTIC5W0l38qOWD6CNWRyU\",\r\n  authDomain: \"gulo-234107.firebaseapp.com\",\r\n  databaseURL: \"https://gulo-234107.firebaseio.com\",\r\n  projectId: \"gulo-234107\",\r\n  storageBucket: \"gulo-234107.appspot.com\",\r\n  messagingSenderId: \"180978526897\",\r\n  appId: \"1:180978526897:web:5390c8092f6d8f2c\"\r\n};\r\n\r\nexport default firebaseConfig;\r\n","import React, { Component } from 'react';\r\nimport { BrowserRouter, Route, Switch} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {bindActionCreators} from 'redux';\r\nimport {setFirebase} from './actions/firebase';\r\nimport Login  from  './components/Login';\r\nimport Gulo   from  './components/Gulo';\r\n\r\nimport {Plugins} from '@capacitor/core';\r\n\r\nimport * as firebase from 'firebase/app';\r\nimport 'firebase/auth';\r\nimport firebaseConfig from './firebaseConfig';\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\nconst { StatusBar, Device } = Plugins\r\n\r\nclass Router extends Component {\r\n  componentDidMount(){\r\n    this.hideStatusBar();\r\n    this.props.setFirebase(firebase);\r\n  }\r\n  async hideStatusBar(){\r\n    let deviceInfo = await Device.getInfo();\r\n    if(deviceInfo.platform!=='web')\r\n      StatusBar.hide();\r\n  }\r\n  render() {\r\n    return (\r\n      <BrowserRouter>\r\n        <Switch>\r\n            <Route path=\"/Login\" component={Login}></Route>\r\n            <Route path=\"/\" component={Gulo}></Route>\r\n        </Switch>\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n}\r\n\r\nfunction mapDispatchToProps(dispatch){\r\n  return bindActionCreators({setFirebase}, dispatch);\r\n}\r\nexport default connect(null,mapDispatchToProps)(Router);\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport ReduxPromise from 'redux-promise';\nimport reducers from './reducers';\nimport Router from './Router.js';\n\nconst createStoreWithMiddleware = applyMiddleware(ReduxPromise)(createStore);\n\nReactDOM.render(\n  <Provider store={createStoreWithMiddleware(reducers)}>\n    <Router />\n  </Provider>\n, document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}